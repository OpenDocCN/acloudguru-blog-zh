<html>
<head>
<title>Ansible vs. Terraform: Fight! | A Cloud Guru</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Ansible vs. Terraform:战斗！|云专家</h1>
<blockquote>原文：<a href="https://acloudguru.com/blog/engineering/ansible-vs-terraform-fight#0001-01-01">https://acloudguru.com/blog/engineering/ansible-vs-terraform-fight#0001-01-01</a></blockquote><div><div class="elementor-widget-container"><figure class="wp-block-image is-resized"><img loading="lazy" src="../Images/f1924661eb5341d40e4715428028ff77.png" alt="" data-original-src="https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2020/06/ansible-circle-a-red.png"/></figure><h3 id="h-what-are-ansible-and-terraform">什么是Ansible和Terraform？</h3><p>如果你在或者想要进入“DevOps”世界，Terraform和Ansible将会是你经常听到的两个名字。这是有充分理由的！两者都是优秀的产品，用于将基础设施创建为可用于部署可重复环境的代码，以满足各种各样的复杂性需求。但是这两者有什么区别呢？为什么你应该选择一个而不是另一个…或者你应该？让我们再深入一点，谈谈这些应用程序的一些相似之处和不同之处。</p><h3 id="h-configuration-management-vs-orchestration"><strong>配置管理与流程编排</strong></h3><p>对于那些读过我以前的文章(博客、指南等)的人来说。)，你已经知道我非常喜欢类比、明喻、隐喻等。这一块也不会有什么不同！Ansible和Terraform是两个非常相似的应用程序，但有一些关键的区别。其中一个关键区别涉及两个非常常见的DevOps概念:配置管理和编排。这些术语通常描述工具的类型。</p><p>Ansible主要是一个配置管理工具，通常缩写为“CM”，Terraform是一个编排工具。现在，要明白有重叠，这些术语不一定是相互排斥的。使用与其优势相匹配的工具会有所帮助，所以让我们来谈一谈每种类型的工具针对什么进行优化。好了，如我所承诺的，类比的时间到了！把这些工具想象成音乐家的管弦乐队。编排工具类似于指挥。指挥确保有正确数量的乐器，并且所有的乐器都能正确演奏。如果出现问题，编排工具通常会移除行为不当的乐器，并用另一个乐器替换它。编排工具通常关注最终结果，并有助于确保环境始终处于该“状态”。Terraform是这样的。Terraform将存储环境的状态，如果有任何东西出了问题或丢失，它将在再次运行时自动提供该资源。这对于需要非常稳定状态的环境来说是极好的。如果出现问题，另一个“Terraform Apply”将纠正问题！另一方面，配置管理工具更像是一个仪器维修人员。配置管理工具，如Ansible，将配置每个仪器，以确保它是正确的，没有损坏，并正常工作。如果仪器有问题，CM工具将修复问题，而不仅仅是更换整个仪器。请记住，Ansible在这方面是一个混合体，能够替代基础设施并执行编排任务，但Terraform通常被认为是这方面的一个优秀产品，因为它具有更高级的状态管理功能。</p><p class="has-text-align-center"><em>通过<a href="https://acloudguru.com/course/hashicorp-certified-terraform-associate"> Terraform认证</a>展示你的IaC技能。</em></p><h3 id="h-procedural-vs-declarative"><strong>程序性与声明性</strong></h3><p>大多数DevOps工具都可以归为描述它们如何执行操作的两个类别之一。这些类别是“程序性的”和“声明性的”。现在，这些术语的定义非常简洁，但是工具之间有很大的重叠，并不总是完全符合其中一个或另一个的模型。Procedural描述了一个应用程序，它需要在代码中安排确切的步骤。例如，如果您需要在您的环境中扩展EC2实例，您将指定需要创建多少实例。如果需要缩小，可以指定要删除的数字。回到我们的管弦乐队比喻，这就像一个指挥要求5个小号，却得到了5个以上的小号。声明性“声明”的正是需要什么，而不是实现结果的过程。因此，如果指挥需要5个小号，或者您需要5个EC2实例，这正是代码执行后您将拥有的数量。如果您有10个，而您需要5个，您只需指定计数为5。在程序上，如果你有10个，而你需要5个，你必须指定5个被删除。 <span>那么，我要带着这一切去哪里呢？Terraform是严格声明性的。您将定义您的环境，如果该环境发生变化，将在下一次“Terraform Apply”中进行修正。另一方面，Ansible是一个混合体。您可以执行允许过程式配置的特殊命令，或者使用大多数执行声明式配置的模块。请务必阅读您所阅读的任何可回答角色的文档，以确保您理解预期的行为，并知道您是否需要明确指出所需的资源，或者您是否需要增加或减少这些资源以获得正确的结果。</span></p><h3 id="h-what-s-best-for-me">什么对我最合适？</h3><p>我真希望能给你一个简单的答案。Ansible和Terraform都把很多事情做得很好。我个人更喜欢使用Terraform进行编排，Ansible进行配置管理。为什么？因为我发现Terraform在基础设施协调方面更加直观。编排是Terraform创建的目的，也是它的主要目的。Terraform的所有更新都集中在编排上，而且看起来更加完美。此外，“地形图”是一个优秀的工具，它提供了比<code>Ansible --dry-run</code>命令更多的有用信息。另一方面，Ansible针对配置管理进行了优化。它可以执行编排任务，但这只是它工作的一部分。正如我在Linux Academy上的“<a href="https://linuxacademy.com/amazon-web-services/training/course/name/deploying-to-aws-with-ansible-and-terraform" target="_blank" rel="nofollow noopener noreferrer">使用Terraform和Ansible </a>部署到AWS”课程所证明的，我更喜欢使用最好的工具来完成任务。你可能会发现你更喜欢用一个工具做所有的事情，这是完全可以接受的！</p></div></div>    
</body>
</html>