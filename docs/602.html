<html>
<head>
<title>Event-driven architecture with Amazon SQS and AWS Lambda | A Cloud Guru</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>亚马逊SQS和AWS Lambda |云专家的事件驱动架构</h1>
<blockquote>原文：<a href="https://acloudguru.com/blog/engineering/event-driven-architecture-with-sqs-and-aws-lambda#0001-01-01">https://acloudguru.com/blog/engineering/event-driven-architecture-with-sqs-and-aws-lambda#0001-01-01</a></blockquote><div><div class="elementor-full-height elementor-element elementor-element-8a920a5 elementor-widget elementor-widget-theme-post-content" data-id="8a920a5" data-element_type="widget" data-widget_type="theme-post-content.default"><div class="elementor-widget-container"><p id="h-the-centerpiece-of-event-driven-architecture-is-a-queue-made-easier-now-that-amazon-sqs-can-trigger-aws-lambda-functions">事件驱动架构的核心是队列——现在亚马逊SQS可以触发AWS Lambda函数，这变得更容易了。</p><p id="700f">您可能知道我非常喜欢事件驱动模式。当系统发生变化时，动作发生，而不是等待和轮询变化。</p><p id="dc03">我们已经谈论这个架构模式很多年了——但是直到最近，它更多的是一个理论上的想法，而不是一个简单实现的模式。</p><p id="89e3">然而，AWS Lambda为每个人带来了事件驱动计算，并将事件驱动范式提升到了一个全新的水平。像网飞(<a href="https://github.com/Netflix/bless" target="_blank" rel="noreferrer noopener"> Bless </a>)和Capital One ( <a href="https://github.com/capitalone/cloud-custodian" target="_blank" rel="noreferrer noopener">云托管</a>)这样的公司现在正在使用事件驱动的架构来执行实时安全性、合规性和策略管理。</p><div class="wp-block-image"><figure class="aligncenter size-large"><img loading="lazy" src="../Images/f7fdeb4fc248e240f83e5c96123044cc.png" alt="Amazon SQS and Lambda create event-driven architecture." class="wp-image-41972" data-original-src="https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2020/12/1_31bBc3xN-6jsq3Q88nISIg.png"/><figcaption>Event-driven patterns</figcaption></figure></div><p id="ade0">事件驱动架构的核心通常是队列。在AWS上，这个中心构件由<a href="https://aws.amazon.com/sqs/" target="_blank" rel="noreferrer noopener">亚马逊简单队列服务(SQS) </a>负责。为了从SQS队列中读取信息，您的lambda函数必须轮询它——直到现在！</p><p id="6caf">在喝咖啡的时候，我注意到在测试lambda函数的触发器列表中有一些有趣的东西。我就像——什么？？我做梦吗？</p>  <h3 id="b318">让我们试试这个！</h3><ul><li>首先，创建一个SQS队列。我把我的测试队列叫做<code><strong><em>TestMySQSLambda</em></strong></code>,这是我在两杯早餐咖啡之前能想到的最原始的名字。</li><li>我还使用了默认的<code><strong><em>Stand</em>ard Queue</strong> </code>——它不能保证消息的顺序。</li><li>点击<code><strong><em>Quick-Create Queue</em></strong> </code> —是的，我们想要快点！</li></ul><ul><li>然后为您的lambda函数创建一个IAM角色，以便能够被SQS触发。这是一个测试，所以让我们大胆地将下面的策略添加到您的基本lambda执行角色中——并将其保存为<code><strong><em>SQSLambda</em></strong></code>角色。</li></ul>  <ul><li>然后登录AWS Lambda控制台，让我们从头开始创建一个函数。还是需要一个非常原创的名字——<code><strong><em>MySQSTriggerTest</em></strong></code>。</li></ul><ul><li>点击<code><strong><em>create</em></strong></code>然后编辑Lambda函数——我使用了以下超级高级的python代码。</li></ul>  <ul><li>现在选择之前刚刚创建的<code><strong>Execution role</strong></code>。</li></ul><ul><li>然后从触发器的长列表中选择已创建的SQS触发器—它是列表中的最后一个。</li></ul><ul><li>最后，选择先前创建的<code><strong><em>TestMySQSLambda</em></strong></code> SQS队列。</li><li>点击<code><strong><em>Add</em></strong></code>，然后点击<code><strong><em>Save</em></strong></code>。</li><li>如果一切都做得正确，您应该在AWS控制台中看到类似的内容——用绿色显示<code><strong>Saved</strong></code>。</li></ul><h3 id="cca3">考验的时候到了！</h3><ul><li>从如下所示的菜单中选择<code><strong><em>Configure test event</em></strong></code>。</li></ul><ul><li>然后搜索<code><strong><em>SQS</em></strong></code>，您应该会看到如下测试模板。</li></ul><ul><li>点击<code><strong><em>Create</em></strong></code>，然后点击<code><strong><em>Test</em></strong></code>。</li></ul><p id="6ec9">全绿——我们很好！现在让我们通过将数据直接放入SQS队列来测试整个管道。</p><ul><li>进入SQS控制台，选择之前创建的队列，点击<code><strong><em>Queue Actions</em></strong></code> <strong/>和<strong/>，然后在<strong> <em>下拉列表中选择<strong/> <code><strong><em>Send a Message</em></strong></code> <strong/>。</em>T9】</strong></li></ul><ul><li>在这里输入你对世界的希望。今天是你做一个好人的机会！</li></ul><p id="713a">现在去查看Cloudwatch日志控制台并搜索<code><strong><em>aws/lambda/MySQSTriggerTest</em></strong></code>——你应该能看到SQS到<a href="https://acloudguru.com/hands-on-labs/setting-up-lambda-functions-with-s3-event-triggers">λ触发器</a>！</p><figure class="wp-block-image size-large"><img loading="lazy" src="../Images/fedc1c7e7c150f2a485ab75b7fd73791.png" alt="Developers can build event-driven architecture with Amazon SQS and AWS Lambda. " class="wp-image-41980" data-original-src="https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2020/12/1_Pw3lOe3gTHwWPZFDTPlSag.png"/></figure><p id="3428">尼利斯。这是一个期待已久的功能，现在允许开发人员构建真正的事件驱动架构，而无需轮询SQS队列获取数据！迫不及待地想看看你要用它来建造什么🙂</p><hr class="wp-block-separator is-style-wide"/><h2 class="has-text-align-center" id="h-get-the-skills-you-need-for-a-better-career">获得更好职业所需的技能。</h2><p class="has-text-align-center">掌握现代技术技能，获得认证，提升您的职业生涯。无论您是新手还是经验丰富的专业人士，您都可以通过实践来学习，并在ACG的帮助下推进您的云计算职业生涯。</p><hr class="wp-block-separator is-style-wide"/></div></div></div>    
</body>
</html>