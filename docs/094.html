<html>
<head>
<title>What happened with Microsoft Azure’s AD and DNS outages? | A Cloud Guru</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>微软Azure的AD和DNS宕机是怎么回事？|云专家</h1>
<blockquote>原文：<a href="https://acloudguru.com/blog/engineering/what-happened-with-microsoft-azures-active-directory-and-dns-outages#0001-01-01">https://acloudguru.com/blog/engineering/what-happened-with-microsoft-azures-active-directory-and-dns-outages#0001-01-01</a></blockquote><div><div class="elementor-widget-container"><p>在过去的一个月里，微软Azure经历了两次宕机。那么这些Azure宕机是怎么发生的呢？微软正在采取什么措施来防止将来出现这样的中断？</p><h2 id="h-march-2021-azure-ad-outage">2021年3月Azure广告中断</h2><p>我们已经开始将云视为将移动应用程序、我们的电子邮件访问和公司基础架构的用户身份验证结合在一起的神奇调料。云永远不会停止计算，对吗？</p><p>但在3月15日，Azure的中断导致了第二大云计算平台的大范围中断。这次宕机不仅影响了Azure服务，还影响了Office、团队、Dynamics 365、Xbox Live等等。发生了什么事？</p><p>大约14小时的中断始于Azure Active Directory (Azure AD)安全密钥的例行轮换。这些密钥轮换是一件好事，可以保证用户的安全。</p><p class="has-text-align-center"><em>(旁注:好奇<a href="https://acloudguru.com/blog/engineering/active-directory-vs-azure-active-directory-whats-the-difference" target="_blank" rel="noreferrer noopener">Active Directory和Azure Active Directory有什么区别</a>？)</em></p><p>但在这一天，微软正在云提供商之间进行复杂的数据迁移。他们在一把特殊的钥匙上标上了“不要旋转”这个密钥需要暂时保留，以完成迁移。酪。。自动旋转过程忽略了这个“不要旋转”标记，当新密钥到达Azure服务时，用户无法登录。</p><p>打个简单的比方，想象一下一家公司在没有告诉任何人的情况下更换了进入大楼所需的刷卡。然后，第二天所有人都出现在办公室，没有人能进去。</p><figure class="wp-block-embed-youtube wp-block-embed is-type-video is-provider-youtube wp-embed-aspect-16-9 wp-has-aspect-ratio"><p class="wp-block-embed__wrapper"> </p></figure><p/><hr class="wp-block-separator"/><p class="has-text-align-center"><a href="https://get.acloudguru.com/post-covid-devops-accelerating-future-webinar"> <strong>后COVID DevOps:加速未来</strong><br/></a>COVID如何影响——甚至加速——工程团队的DevOps最佳实践？<a href="https://get.acloudguru.com/post-covid-devops-accelerating-future-webinarhttps://get.acloudguru.com/post-covid-devops-accelerating-future-webinar">观看这个免费的点播网络研讨会</a>与DevOps领导者进行小组讨论，我们将在后COVID时代探索DevOps。</p><hr class="wp-block-separator"/><h2 id="h-april-2021-azure-dns-outage">2021年4月Azure DNS宕机</h2><p>2021年4月1日，Azure DNS开始遇到可用性问题，导致多个地区的许多客户无法访问和管理Azure服务，随后发生了一次较小的宕机。</p><p>这可能被认为是世界上最不好笑的愚人节玩笑，但它实际上是由Azure DNS服务器遇到针对Azure上托管的一组域的DNS查询激增引起的。这一系列事件暴露了DNS服务中的代码缺陷。这导致了服务过载和可用性下降。</p><p><a href="https://status.azure.com/en-gb/status/history/">据微软</a>称，DNS服务自动恢复，恢复时间“超过了[微软]的设计目标。”微软报告说，它已经在努力修复代码缺陷，改善自动滞留和缓解异常流量。</p><figure class="wp-block-embed-youtube wp-block-embed is-type-video is-provider-youtube wp-embed-aspect-16-9 wp-has-aspect-ratio"><p class="wp-block-embed__wrapper"> </p></figure><p/><h3 id="h-how-does-this-relate-to-the-2020-azure-ad-outage">这与2020年Azure广告中断有什么关系？</h3><p id="h-stop-me-if-you-ve-heard-this-one-before">如果你以前听过这个，就打断我。2020年9月也发生了类似的中断(足够有趣)，这也影响了3月份的Azure AD。那为什么当时没有修好呢？</p><p>2021年3月的中断部分是由于微软修复了2020年9月中断的根本原因。工作尚未完成——重大改变需要时间——但它可以防止3月份的停机。那么为什么会这样呢？</p><p>一个软件错误未能识别“请不要旋转这把钥匙”的标志一个修复在几个小时内就实现了，但是服务清理缓存和旧密钥传播到Azure的各个角落需要时间。</p><hr class="wp-block-separator"/><p class="has-text-align-center"><a href="https://get.acloudguru.com/cloud-dictionary-of-pain"> <strong>获得痛苦的云词典</strong> </a> <br/>说云不一定要努力。我们分析了数以百万计的回复，找出了最容易让人犯错的概念。抓住这个<a href="https://get.acloudguru.com/cloud-dictionary-of-pain" target="_blank" rel="noreferrer noopener">云指南</a>获取一些最痛苦的云术语<a>的简洁定义。</a></p><hr class="wp-block-separator"/><h2 id="h-how-can-we-be-sure-an-outage-won-t-happen-again">我们如何确保停电不会再次发生？</h2><p>正如一位智者曾经说过的:“所有的软件总有无限多的未知bug。”</p><p>软件总会有bug。没有任何云平台能够提供无中断服务。但是我们可以期待更快的恢复和对所发生的事情的透明度——以及为避免将来的问题所做的努力。</p><p>就其本身而言，微软正在采取措施减少未来的中断，<a href="https://status.azure.com/en-gb/status/history/">写道</a>:</p><blockquote class="wp-block-quote"><p><em>“Azure AD正在分多个阶段努力对后端安全部署流程(SDP)系统应用额外的保护，以防止包括此问题在内的一类风险。。。我们理解这一事件的不可思议的影响和不可接受性，并深表歉意。我们正在不断采取措施来改进Microsoft Azure平台和我们的流程，以帮助确保此类事件不会在未来发生。”</em></p></blockquote><h2 id="h-how-frequent-are-cloud-outages">云中断的频率有多高？</h2><p>如此成熟的平台应该有数百万个捕捉bug的功能和设施，但现在我们来了。这种中断<em>不应该发生，对吗？</em></p><p>对云来说，有<em>种方式</em>比缺点更有<a href="https://acloudguru.com/blog/business/what-is-cloud-migration#cloudbenefits" target="_blank" rel="noreferrer noopener">的好处，但是中断可能会发生。</a></p><p>亚马逊网络服务(AWS)和谷歌云(GCP)最近也出现了宕机，所以这是我们在一定程度上必须预料到的事情。2020年11月的AWS中断影响了从Adobe到Roku的网站和服务，2019年6月的GCP中断影响了YouTube、G-Suite和Snapchat。</p><hr class="wp-block-separator"/><h2 class="has-text-align-center" id="h-level-up-your-cloud-career">提升您的云计算职业生涯</h2><p class="has-text-align-center">无论您是云新手还是经验丰富的专家，云专家都能让您轻松(而且非常棒)地获得认证并掌握现代技术技能。查看<a href="https://acloudguru.com/blog/news/whats-free-at-acg-april-2021" target="_blank" rel="noreferrer noopener"> ACG目前的免费课程</a>或<a href="https://acloudguru.com/pricing">立即开始</a>免费试用。</p></div></div>    
</body>
</html>