<html>
<head>
<title>Troubleshooting EC2 Connectivity Issues | A Cloud Guru</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>EC2连接问题故障排除|云专家</h1>
<blockquote>原文：<a href="https://acloudguru.com/blog/engineering/connect-to-amazon-ec2-using-putty-private-key-on-windows#0001-01-01">https://acloudguru.com/blog/engineering/connect-to-amazon-ec2-using-putty-private-key-on-windows#0001-01-01</a></blockquote><div><div class="elementor-widget-container"><p class="p1">学习AWS可能是一个非常漫长和令人畏惧的经历。有几十种主要服务，每一种都有数百种功能需要学习。然而，当试图访问一个已配置的AWS资源(如EC2实例)时，很少有事情比连接问题更令人沮丧了。<span class="Apple-converted-space"> </span>毕竟，您刚刚花了几个小时了解ami、实例类型、IP地址、用户数据、存储卷、安全组和密钥对。<span class="Apple-converted-space"> </span>现在你只想实际访问这个该死的实例，并从中得到一些乐趣。但是当您试图访问实例时，无论是通过SSH还是HTTP，您都会得到这些可怕的错误之一:“访问被拒绝”，或者“操作超时”，或者其他一些变化。<span class="Apple-converted-space"> </span>不管错误——你都不能登录。</p><p class="p1">AAAAARRRGGGGGG！</p><p class="p1">好吧，所以你发泄了一点——也许甚至对着你的电脑大喊大叫。<span class="Apple-converted-space"> </span>不管你有多沮丧，你还是需要弄清楚哪里出了问题。<span class="Apple-converted-space"> </span>考虑到这一点，我将介绍一些导致许多连接性问题的常见(甚至可能很简单)问题。</p><p class="p1"><img loading="lazy" class="size-full wp-image-7987 aligncenter" src="../Images/cf5a701800eedfdbb5c470206c7d4467.png" alt="Connectivity Path" data-original-src="https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2020/06/connectivity-path.png"/></p><p class="p1">了解路径:</p><p class="p1">为了成功地解决EC2实例的连接问题，我们首先需要完全理解数据从我们的计算机传输到EC2实例时所采用的路径。为了这篇博文的目的，我们必须忽略“开放互联网”这一部分，因为我们无法控制它。<span class="Apple-converted-space"> </span>我们将关注的是，一旦数据到达您的AWS虚拟私有云(VPC)，因为这部分路径是我们控制的。<span class="Apple-converted-space"> </span>在这个练习中，我们将回溯VPC的基础设施——也就是说，我们将从EC2实例开始，找出从VPC到开放互联网的方法。</p><h3 class="p1">EC2实例:</h3><p class="p1">它有公共IP地址吗？</p><p class="p1">是:继续下一部分。</p><p class="p1">否:要么创建一个弹性IP地址并将其附加到实例<em>上，要么</em>终止实例并创建一个新的实例(确保在创建过程中“启用”公共IP地址)。再次检查连接。<span class="Apple-converted-space"> </span>如果成功了，太好了！<span class="Apple-converted-space"> </span>大功告成！<span class="Apple-converted-space"> </span>如果没有效果，继续下一节。</p><h3 class="p1">安全组:</h3><p class="p1"><strong> 1)安全组是否有HTTPS和/或SSH的入站允许规则？</strong></p><p class="p1">是:是:转到问题2。</p><p class="p1">否:添加HTTP和/或SHH的允许规则(取决于您的需要)。再次检查连接。<span class="Apple-converted-space"> </span>如果成功了，太好了！<span class="Apple-converted-space"> </span>大功告成！<span class="Apple-converted-space"> </span>如果不奏效，进入下一节。</p><p class="p1"><strong>2)HTTP和/或SSH是否适用于所有来源的流量(0.0.0.0/0)？</strong></p><p class="p1">是:继续下一部分。</p><p class="p1">否:将每个协议的源编辑为0.0.0.0/0。再次检查连接。<span class="Apple-converted-space"> </span>如果成功了，太好了！<span class="Apple-converted-space"> </span>大功告成！<span class="Apple-converted-space"> </span>如果不奏效，进入下一节。</p><p class="p1">注意:对于安全组来说，这不是最佳实践，但是我们在这里只是尝试解决这个问题。</p><h3 class="p1">子网:</h3><p class="p1"><strong> 1)子网路由表是否有到互联网网关的路由？</strong></p><p class="p1">是:转到问题2。</p><p class="p1">否:编辑路由表以添加到IGW目的地= 0.0.0.0/0和目标=(互联网网关ID)的路由</p><p class="p1">注:如果没有IGW存在，移动到IGW和返回这里的一节。再次检查连接。<span class="Apple-converted-space"> </span>如果成功了，太好了！<span class="Apple-converted-space"> </span>大功告成！<span class="Apple-converted-space"> </span>如果没有效果，进入下一个问题。</p><p class="p1">保护子网的网络访问控制列表是否有HTTPS和/或SSH的入站允许规则？</p><p class="p1">是:转到问题3。</p><p class="p1">否:添加HTTP和/或SHH的允许规则(取决于您的需要)。再次检查连接。<span class="Apple-converted-space"> </span>如果成功了，太好了！<span class="Apple-converted-space"> </span>大功告成！<span class="Apple-converted-space"> </span>如果没有效果，进入下一个问题。</p><p class="p1"><strong> 3)保护子网的网络访问控制列表是否为所有流量设置了出站允许规则？</strong></p><p class="p1">是:进入下一部分。</p><p class="p1">否:编辑出站规则以允许来自所有来源的所有流量(0.0.0.0/0)。再次检查连接。<span class="Apple-converted-space"> </span>如果成功了，太好了！<span class="Apple-converted-space"> </span>大功告成！<span class="Apple-converted-space"> </span>如果不奏效，进入下一节。</p><h3 class="p1">互联网网关</h3><p class="p1"><strong> 1)是否有一个连接到VPC的互联网网关，其中已经提供了EC2实例？</strong></p><p class="p1">是:回到“子网”部分。</p><p class="p1"><span class="Apple-converted-space">号:</span>创造和IGW并将其附属于VPC。回到“子网”部分。</p><p>注意:<a href="https://acloudguru.com/hands-on-labs/enable-ipv6-on-a-vpc-with-a-private-subnet-and-egress-only-internet-gateway">仅出口互联网网关</a>仅支持IPv6地址，用于仅出站互联网访问。</p><p class="p1">好了，你知道了。<span class="Apple-converted-space"> </span>希望通过遵循这个指南，您可以很快连接到您的EC2实例！</p><p>其他相关资源:</p></div></div>    
</body>
</html>