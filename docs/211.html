<html>
<head>
<title>Configure DNS with Route 53 | A Cloud Guru</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>使用Route 53 |云专家配置DNS</h1>
<blockquote>原文：<a href="https://acloudguru.com/blog/engineering/configure-dns-with-route-53#0001-01-01">https://acloudguru.com/blog/engineering/configure-dns-with-route-53#0001-01-01</a></blockquote><div><div class="elementor-widget-container"><p>如果你是一个网站所有者，从GoDaddy(或一些其他注册商)购买了一个域名，并开始探索AWS以利用云计算的能力，你需要解决的一个问题是:我的应用程序/网站服务器托管在AWS上，但我如何与我从GoDaddy购买的域名集成？最简单的答案是更新你的GoDaddy NS记录，指向亚马逊的域名服务器。在本教程中，我们将看看这个过程是如何工作的。请注意，我们将查看GoDaddy，这样我们就有了一个特定的示例，但是无论您在哪里购买域名，这个过程都是非常相似的。</p><h2>背景</h2><p>在我们开始行动之前，让我们试着理解这个过程中涉及的一些基本组件，以及它们是如何协同工作的。让我们假设你是域名mywebsite.com的所有者。在典型设置中，当用户在其浏览器中键入您的网站URL时，会发生以下情况:</p><ol> <li>浏览器向域名系统服务器查询您的域的IP地址。请注意，在确定使用哪个DNS服务器时，查找的顺序是:<ol> <li>本地缓存</li> <li>局域网</li> <li>ISP级缓存服务器</li> <li>权威DNS服务器</li></ol> </li> <li>然后，浏览器查询权威的DNS域名服务器(根服务器)以找出<strong>的“顶级域名”(TLD)域名服务器。com </strong>域名。</li> <li>接下来，浏览器查询TLD域名服务器以获取<strong>mywebsite.com的域名服务器(您通过注册商配置的)。</strong></li> <li>最后，它查询域名服务器以获得运行<strong>https://mywebsite.com</strong>的主机的IP地址。</li></ol><p>回顾一下，涉及的主要组件有:</p><ul> <li><strong>根域名服务器</strong>–这些服务器直接响应“根区域”中的记录请求，但它们也可以通过TLD域名服务器列表来响应其他请求。</li> <li><strong> TLD域名服务器</strong>–这些域名服务器响应特定顶级域名的查询，并返回给定FQDN(完全合格域名)的域名服务器。</li> <li><strong>域名</strong>的域名服务器–在顶级域名中，可能有数百万个FQDNs。每一个域名都将分布在一个域名服务器网络中，这些服务器对用户想要访问的特定域名的请求作出响应。</li></ul><p>现在，如果我们将这些信息放在我们试图实现的上下文中，新的流程将保持DNS提供商作为“GoDaddy”，但只是作为一个代理。我们可以使用AWS名称服务器来解析您的主机IP。</p><h2>使用路由53配置DNS</h2><p>注意，我们这里讨论的步骤是针对“简单”DNS配置的，比如托管一个基本的网站或应用程序。如果您当前的DNS设置很复杂，步骤可能会略有不同。<a href="https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/migrate-dns-domain-in-use.html" target="_blank" rel="noopener noreferrer"> <u> AWS文档</u> </a>在我们继续之前，有一个声明值得一读:</p><blockquote><p>“当您将DNS服务从另一个提供商迁移到<a href="https://acloudguru.com/blog/engineering/how-to-deploy-a-custom-domain-with-the-amplify-console"> AWS Route 53 </a>时，您将在Route 53中复制您当前的DNS配置。<em> I </em> <em> n Route 53，您创建了一个与您的域同名的托管区域，并且您在托管区域中创建了记录。每条记录表明您希望如何为指定的域名或子域名路由流量。</em></p></blockquote><p>在一个简单的场景中，您从当前的DNS提供商(在我们的示例中是GoDaddy)向AWS迁移以下一项或多项内容:</p><ul> <li>a(地址)记录–将域名或子域名与相应资源的IPv4地址(例如，<em>192.0.2.3</em>)相关联。</li> <li>AAAA(地址)记录-将域名或子域名与相应资源的IPv6地址(例如，<em>2001:0 db 8:85 a3:::ABCD:0001:234</em>5)相关联。</li> <li>MX(邮件服务器)记录–将流量路由到邮件服务器。</li> <li>CNAME记录–将一个域的流量重新路由到另一个域。</li></ul><h3>步骤1:创建托管区域</h3><p>登录<a href="https://console.aws.amazon.com/route53/" target="_blank" rel="noopener noreferrer"> AWS管理控制台</a>并导航至Route 53菜单。然后点击<strong>创建托管区域</strong>。创建区域后，您将在页面右侧看到一个表单。在字段中输入以下信息:</p><ul> <li><strong>域名:</strong>您的域名；在我们的例子中，mywebsite.com。</li> <li><strong>点评:</strong>你可以在这里输入任何你喜欢的东西。</li> <li><strong>类型:</strong>根据该区域的可用性类型进行选择。默认为“公共托管区域”，这意味着可以从互联网访问该区域。“私人托管区域”可从AWS VPC内部访问，不可用于公共互联网。</li></ul><p>默认情况下，该步骤将在您的托管区域中创建两个条目:NS(名称服务器)和SOA(授权起始)记录。记下NS(名称服务器)条目。下一步，我们将使用GoDaddy配置这些。</p><h3>步骤2:创建DNS记录</h3><p>单击新创建的托管区域，这将带您进入“托管区域详细信息”屏幕。点击<strong>创建资源记录</strong>，您将看到一个新的表单。为以下内容选择适当的值:</p><ul> <li><strong> Name </strong>:如果你是<em>而不是</em>配置子域，请留空。</li> <li><strong>类型</strong> : <strong> </strong>参考GoDaddy找出你当前的类型是什么，在这里使用相同的值。对于建立一个基本的网站，这将最有可能是一个或AAAA。</li> <li><strong>别名</strong>:选择一个合适的值。AWS文档的<a href="https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/resource-record-sets-choosing-alias-non-alias.html" target="_blank" rel="noopener noreferrer">部分提供了更多关于选择什么(和什么时候)的信息。</a></li> <li><strong>值/别名目标</strong>:根据别名是(或)否，您将指向一个IP地址或一些其他别名条目。</li> <li><strong>路由策略</strong>:默认为“简单”。但是如果你想要一个不同的路由策略，你可以参考<a href="https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/routing-policy.html" target="_blank" rel="noopener noreferrer"> AWS文档</a>来理解基于场景选择哪一个。</li></ul><h3>步骤3:通过您的域注册商管理DNS设置</h3><p>在这一步，我们将我们的域映射到我们的服务器。回到我们列出的DNS查找的三个组成部分，这种映射在最后一个层面上有所帮助。在向TLD域名服务器发出请求后，存放你的记录的亚马逊域名服务器将被返回。这允许用户为您的网站或应用程序解析域名。登录GoDaddy控制台，导航到您的域，然后为您要配置的域单击<strong>管理</strong>。接下来，点击附加设置部分下的<strong>管理DNS </strong>(这将在页面底部):点击<strong>添加</strong>(在页面顶部的记录部分)并将类型设置为<em>名称服务器</em>。在<em>主机</em>字段中，输入您的域名。在<em>指向</em>字段中，输入您在配置AWS托管区域记录时在步骤1中获得的一个NS IP地址。重复此过程，从步骤1中的托管区域添加每个NS记录。就是这样！您的配置完成了！现在，您需要做的就是花一些时间来传播这些设置。这些相同的原则将适用于这样的情况，你想离开根域与GoDaddy，但有子域DNS的AWS。除了将DNS“委托(或)代理”给AWS之外，另一种方法是“迁移注册”。关于<a href="https://docs.aws.amazon.com/Route53/latest/DeveloperGuide/domain-transfer-to-route-53.html" target="_blank" rel="noopener noreferrer">将域名注册转移到Amazon Route 53 </a>的AWS文档中有关于如何做的详细信息。</p></div></div>    
</body>
</html>