<html>
<head>
<title>Kubectl Cheat Sheet - Kubernetes Commands | A Cloud Guru</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Kubectl备忘单- Kubernetes命令|云专家</h1>
<blockquote>原文：<a href="https://acloudguru.com/blog/engineering/kubernetes-cheat-sheet#0001-01-01">https://acloudguru.com/blog/engineering/kubernetes-cheat-sheet#0001-01-01</a></blockquote><div><div class="elementor-widget-container"><p>如果你像我一样，你可能会有这样的时刻，你在终端前，双手在键盘上徘徊，然后…什么都没有。我似乎总是僵住，可能太依赖于<a href="https://acloudguru.com/blog/engineering/tutorial-the-best-tips-tricks-for-bash-explained" target="_blank" rel="nofollow noopener noreferrer"> bash历史</a>。(向上的箭头是我的朋友。)</p><p>在学习Kubernetes的时候，我最终在我的显示器上贴了14或15个便利贴来帮助我——但过了一段时间，我几乎看不清屏幕上的内容。所以最后，我写了一张小而易读的纸，当我或者你陷入困境时可以参考。</p><p>但首先，让我们花点时间来建立一些基础知识。</p><h3 id="h-what-is-kubernetes">What is Kubernetes?</h3><p>Kubernetes是一个管理容器化工作负载的平台。Kubernetes协调计算、<br/>网络和存储，以提供跨基础设施提供商的无缝可移植性。迷茫？查看<a href="https://acloudguru.com/course/introduction-to-kubernetes" target="_blank" rel="noreferrer noopener">Kubernetes</a>简介，我们的Kubernetes 101速成课程包含你需要知道的所有基础知识。</p><h3 id="h-what-is-kubectl">What is Kubectl?</h3><p>kubectl是Kubernetes命令行工具。它允许我们对Kubernetes集群运行命令——部署应用程序、检查和管理集群资源以及查看日志。</p><h3 id="h-kubernetes-learning-resources">Kubernetes学习资源</h3><h2>忽必烈中的忽必烈命令</h2><p>这个Kubernetes备忘单旨在让您开始在Kubernetes中执行Kubectl命令，并为您提供所有基本命令。(查看下面的可下载资产！)</p><p><strong>命令结果</strong>这个备忘单上的一些命令可能不会返回任何结果，但是不用担心！下面是一些你可以创建的资源，然后快速转身运行你的备忘单中的命令来改变你的资源。先说豆荚。</p><h3 id="h-yaml-for-a-basic-busybox-pod">基本busybox pod的YAML</h3><pre class="wp-block-preformatted">apiVersion: v1kind: Podmetadata:name: busyboxspec:containers:- image: busybox:1.28.4command:- sleep- "3600"name: busyboxrestartPolicy: Always</pre><p><a href="https://acloudguru.com/blog/engineering/learn-the-yaml-basics" target="_blank" rel="noreferrer noopener nofollow"> <strong>在这里了解更多关于YAML的信息。</strong> </a>用此命令创建pod:</p><pre class="wp-block-preformatted">kubectl create -f busybox.yaml</pre><p>使用此命令创建部署:</p><pre class="wp-block-preformatted">kubectl run nginx --image=nginx</pre><p>使用此命令从上面的部署创建服务:</p><pre class="wp-block-preformatted">kubectl expose deployment nginx --port=80 --type=NodePort</pre><p class="has-text-align-left">以下是使用节点本地存储的简单持久性卷的YAML:</p><pre class="wp-block-preformatted">apiVersion: v1kind: PersistentVolumemetadata:name: data-pvnamespace: webspec:storageClassName: local-storagecapacity:storage: 1GiaccessModes:- ReadWriteOncehostPath:path: /mnt/data</pre><p>使用以下命令创建永久卷:</p><pre class="wp-block-preformatted">kubectl apply -f my-pv.yaml</pre><p>以下是简单配置图的YAML:</p><pre class="wp-block-preformatted">apiVersion: v1kind: ConfigMapmetadata:name: my-config-mapdata:myKey: myValueanotherKey: anotherValue</pre><p>使用以下命令创建配置映射:</p><pre class="wp-block-preformatted">kubectl apply -f configmap.yaml</pre><p>下面是YAML的一个秘密:</p><pre class="wp-block-preformatted">apiVersion: v1kind: Secretmetadata:name: my-secretstringData:myKey: myPassword</pre><p>使用此命令创建密码:</p><pre class="wp-block-preformatted">kubectl apply -f secret.yaml</pre><p>以下是服务帐户的YAML:</p><pre class="wp-block-preformatted">apiVersion: v1kind: ServiceAccountmetadata:name: acrnamespace: defaultsecrets:- name: acr</pre><p>使用此命令创建服务帐户:</p><pre class="wp-block-preformatted">kubectl apply -f serviceaccount.yaml</pre><h2><b>立即下载！</b></h2><p>这应该足以让你开始！我还创建了这个PDF供您下载，并放在旁边供您参考！如果您喜欢这些练习并遵循这些命令，请查看我们的<a href="https://acloudguru.com/course/cloud-native-certified-kubernetes-administrator-cka-legacy" target="_blank" rel="nofollow noopener noreferrer">云原生认证Kubernetes管理员(CKA) </a>课程，深入了解Kubernetes！</p><h3 id="h-want-more-cloud-tech-goodness-check-these-out">想要更多云技术的好处吗？看看这些:</h3><hr class="wp-block-separator"/><h2 class="has-text-align-center" id="h-master-the-most-in-demand-skills">掌握最受欢迎的技能</h2><p class="has-text-align-center"><meta charset="utf-8"/>通过ACG的课程、实验室、学习路径和<a href="https://acloudguru.com/platform/cloud-sandbox-playgrounds">沙盒软件</a>学习按需云技能。查看<a href="https://acloudguru.com/blog/news/whats-free-at-acg" target="_blank" rel="noreferrer noopener"> ACG目前的免费课程</a>或<a href="https://acloudguru.com/pricing">立即开始</a>免费试用。</p><hr class="wp-block-separator"/><h2>库柏切叶刀</h2><h3>查看资源信息</h3><h4>节点</h4><figure class="wp-block-table"><table><tbody><tr><td>$ kubectl get no</td></tr><tr><td>$ kubectl get no -o wide</td></tr><tr><td>$ kubectl describe no</td></tr><tr><td>$ kubectl get no -o yaml</td></tr><tr><td>$ ku bectl get node–select or =[label _ name]</td></tr><tr><td>$ kubectl get nodes -o jsonpath='{。items[*].status.addresses[？(@.type=="ExternalIP")]。地址} '</td></tr><tr><td>$ kubectl top node [node_name]</td></tr></tbody></table></figure><h4>分离舱</h4><figure class="wp-block-table"><table><tbody><tr><td>$ kubectl获取采购订单</td></tr><tr><td>$ kubectl获得po -o wide</td></tr><tr><td>$ kubectl描述采购订单</td></tr><tr><td>$ kubectl获取采购订单-显示-标签</td></tr><tr><td>-= ytet-伊甸园字幕组=-翻译:粒粒粒尘紫月猫姐scenery校对:阿衡时间轴:邦德猪</td></tr><tr><td>$ kubectl get po -o yaml</td></tr><tr><td>$ ku bect l get pod[pod _ name]-o YAML–export</td></tr><tr><td>$ ku bect l get pod[pod _ name]-o YAML–export &gt; nameoffile . YAML</td></tr><tr><td>$ ku bectl get pods–字段选择器状态。phase =正在运行</td></tr></tbody></table></figure><h4>Namespaces</h4><figure class="wp-block-table"><table><tbody><tr><td>$ kubectl get ns</td></tr><tr><td>$ kubectl get ns -o yaml</td></tr><tr><td>$ kubectl描述ns</td></tr></tbody></table></figure><h4>部署</h4><figure class="wp-block-table"><table><tbody><tr><td>$ kubectl获得部署</td></tr><tr><td>$ kubectl描述部署</td></tr><tr><td>$ kubectl得到广泛部署</td></tr><tr><td>$ kubectl get deploy -o yam</td></tr></tbody></table></figure><h4>服务</h4><figure class="wp-block-table"><table><tbody><tr><td>$ kubectl获取服务</td></tr><tr><td>$ kubectl描述svc</td></tr><tr><td>$ kubectl获得svc -o范围</td></tr><tr><td>库布特雷得到svc或yaml</td></tr><tr><td>$ ku bectl get SVC–显示-标签</td></tr></tbody></table></figure><h4>达蒙塞特</h4><figure class="wp-block-table"><table><tbody><tr><td>$ kubectl获取ds</td></tr><tr><td>$ ku bectl get ds–所有名称空间</td></tr><tr><td>$ ku bectl describe ds[daemon set _ name]-n[namespace _ name]</td></tr><tr><td>$ ku bectl get ds[ds _ name]-n[ns _ name]-o YAML</td></tr></tbody></table></figure><h4>事件</h4><figure class="wp-block-table"><table><tbody><tr><td>$ kubectl获取事件</td></tr><tr><td>$ kubectl获取事件-n kube-system</td></tr><tr><td>$ kubectl获取事件-w</td></tr></tbody></table></figure><h4 id="h-logs">日志</h4><figure class="wp-block-table"><table><tbody><tr><td>$ kubectl logs [pod_name]</td></tr><tr><td>$ ku bectl logs–since = 1h[pod _ name]</td></tr><tr><td>$ ku bectl logs–tail = 20[pod _ name]</td></tr><tr><td>$ ku bectl logs-f-c[容器名称] [pod名称]</td></tr><tr><td>$ kubectl logs [pod_name] &gt; pod.log</td></tr></tbody></table></figure><h4>服务帐户</h4><figure class="wp-block-table"><table><tbody><tr><td>$ kubectl获取sa</td></tr><tr><td>库布特雷得到了sa -o yaml</td></tr><tr><td>$ ku bectl get service accounts default-o YAML &gt;。/sa.yaml</td></tr><tr><td>$ kubectl替换serviceaccount默认值-f. /sa.yaml</td></tr></tbody></table></figure><h4>复制集</h4><figure class="wp-block-table"><table><tbody><tr><td>$ kubectl获取rs</td></tr><tr><td>$ kubectl描述rs</td></tr><tr><td>$ kubectl获得rs -o宽度</td></tr><tr><td>库布特雷得到了rs -o yaml</td></tr></tbody></table></figure><h4>角色(Roles)</h4><figure class="wp-block-table"><table><tbody><tr><td>$ kubectl获取角色-所有-名称空间</td></tr><tr><td>$ ku bectl get roles–all-namespaces-o YAML</td></tr></tbody></table></figure><h4>-秘密</h4><figure class="wp-block-table"><table><tbody><tr><td>忽必烈得到秘密</td></tr><tr><td>$ ku bectl get secrets–所有名称空间</td></tr><tr><td>$ kubectl获取秘密-o yaml</td></tr></tbody></table></figure><h4>ConfigMaps(配置映射)</h4><figure class="wp-block-table"><table><tbody><tr><td>立方英尺</td></tr><tr><td>$ ku bectl get cm–所有名称空间</td></tr><tr><td>$ ku bectl get cm–all-namespaces-o YAML</td></tr></tbody></table></figure><h4>进入</h4><figure class="wp-block-table"><table><tbody><tr><td>$ kubectl get ing</td></tr><tr><td>$ ku bectl get ing–所有名称空间</td></tr></tbody></table></figure><h4>持久卷</h4><figure class="wp-block-table"><table><tbody><tr><td>$ kubectl获取pv</td></tr><tr><td>$ kubectl描述pv</td></tr></tbody></table></figure><h4>PersistentVolumeClaim</h4><figure class="wp-block-table"><table><tbody><tr><td>卡布拉尔得到pvc</td></tr><tr><td>$ kubectl描述pvc</td></tr></tbody></table></figure><h4>存储类</h4><figure class="wp-block-table"><table><tbody><tr><td>$ kubectl获取sc</td></tr><tr><td>$ kubectl获取sc -o yaml</td></tr></tbody></table></figure><h4>多重资源</h4><figure class="wp-block-table"><table><tbody><tr><td>卡布拉尔得到svc，po</td></tr><tr><td>$ kubectl获得部署，否</td></tr><tr><td>$ kubectl get all</td></tr><tr><td>$ kubectl获取所有名称空间</td></tr></tbody></table></figure><h3>更改资源属性</h3><h4>污点</h4><figure class="wp-block-table"><table><tbody><tr><td>$ kubectl污点[节点名][污点名]</td></tr></tbody></table></figure><h4>标签</h4><figure class="wp-block-table"><table><tbody><tr><td>$ kubectl label [node_name] disktype=ssd</td></tr><tr><td>$ kubrectl label[pod _ name]env = prod</td></tr></tbody></table></figure><h4>警戒线/非警戒线</h4><figure class="wp-block-table"><table><tbody><tr><td>$ kubectl cordon [node_name]</td></tr><tr><td>$ kubi con sol[node _ name]</td></tr></tbody></table></figure><h4>流干</h4><figure class="wp-block-table"><table><tbody><tr><td>$ kubectl drain [node_name]</td></tr></tbody></table></figure><h4>节点/单元</h4><figure class="wp-block-table"><table><tbody><tr><td>$ kubectl delete node [node_name]</td></tr><tr><td>$多维数据集删除在[sub _ name]之下</td></tr><tr><td>$ kubectl edit node [node_name]</td></tr><tr><td>$多维数据集编辑下[subname]</td></tr></tbody></table></figure><h4>部署/名称空间</h4><figure class="wp-block-table"><table><tbody><tr><td>$ kubectl编辑部署[部署名称]</td></tr><tr><td>$ kubectl删除部署[部署名称]</td></tr><tr><td>$ ku bectl expose deploy[depl oy _ name]–port = 80–type = node port</td></tr><tr><td>$ ku bectl scale deploy[deploy _ name]–副本数=5</td></tr><tr><td>$ kubectl delete ns</td></tr><tr><td>$ kubectl edit ns [ns_name]</td></tr></tbody></table></figure><h4>服务</h4><figure class="wp-block-table"><table><tbody><tr><td>$ kubectl编辑服务[服务名称]</td></tr><tr><td>$ kubectl删除服务提供商[服务提供商名称]</td></tr></tbody></table></figure><h4>达蒙塞特</h4><figure class="wp-block-table"><table><tbody><tr><td>$ kubectl edit ds [ds_name] -n kube-system</td></tr><tr><td>$ kubectl delete ds [ds_name]</td></tr></tbody></table></figure><h4>服务帐户</h4><figure class="wp-block-table"><table><tbody><tr><td>$ kubectl edit sa [sa_name]</td></tr><tr><td>$ kubectl delete sa [sa_name]</td></tr></tbody></table></figure><h4>给…作注解</h4><figure class="wp-block-table"><table><tbody><tr><td>$ kubectl annotate po [pod_name] [annotation]</td></tr><tr><td>$ kubectl annotate no [node_name]</td></tr></tbody></table></figure><h3>添加资源</h3><h4>创建Pod</h4><figure class="wp-block-table"><table><tbody><tr><td>$ ku bectl create-f[文件名]</td></tr><tr><td>$ ku bectl apply-f[文件名]</td></tr><tr><td>$ ku bectl run[pod _ name]–image = ngi NX–restart = Never</td></tr><tr><td>$ ku bectl run[pod _ name]–generator = run-pod/v1–image = nginx</td></tr><tr><td>$ ku bectl run[pod _ name]–image = nginx–restart = Never</td></tr></tbody></table></figure><h4>创建服务</h4><figure class="wp-block-table"><table><tbody><tr><td>$ kubectl创建svc节点端口[SVC _ name]–TCP = 8080:80</td></tr></tbody></table></figure><h4>创建部署</h4><figure class="wp-block-table"><table><tbody><tr><td>$ ku bectl create-f[文件名]</td></tr><tr><td>$ ku bectl apply-f[文件名]</td></tr><tr><td>$ ku bectl create deploy[deploy _ name]–image = ngi NX</td></tr></tbody></table></figure><h4>交互式Pod</h4><figure class="wp-block-table"><table><tbody><tr><td>$ ku bectl run[pod _ name]–image = busybox–RM-it–restart = Never—sh</td></tr></tbody></table></figure><h4>输出YAMLto文件</h4><figure class="wp-block-table"><table><tbody><tr><td>$ ku bectl create deploy[deploy _ name]–image = ngi NX–dry-run-o YAML &gt; deploy . YAML</td></tr><tr><td>$多维数据集获取po[pod _ name]-o YAML-导出&gt;</td></tr></tbody></table></figure><h4>获得帮助</h4><figure class="wp-block-table"><table><tbody><tr><td>$ kubectl -h</td></tr><tr><td>$ kubectl create -h</td></tr><tr><td>$ kubectl run -h</td></tr><tr><td>$ kubectl解释deploy.spec</td></tr></tbody></table></figure><h3>要求</h3><h4>API调用</h4><figure class="wp-block-table"><table><tbody><tr><td>$ ku bectl get–raw/API/metrics . k8s . io/</td></tr></tbody></table></figure><h4>集群信息</h4><figure class="wp-block-table"><table><tbody><tr><td>$ kubectl配置</td></tr><tr><td>$ kubectl集群信息</td></tr><tr><td>$ kubectl获取组件状态</td></tr></tbody></table></figure></div></div>    
</body>
</html>