<html>
<head>
<title>AWS IAM: Security Best Practices | A Cloud Guru</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>AWS IAM:安全最佳实践|云专家</h1>
<blockquote>原文：<a href="https://acloudguru.com/blog/engineering/aws-iam-security-best-practices#0001-01-01">https://acloudguru.com/blog/engineering/aws-iam-security-best-practices#0001-01-01</a></blockquote><div><div class="elementor-widget-container"><p>如果你让任何人描述他们的团队或组织的AWS帐户中有什么，你可能会得到相当一致的答案。一些S3桶，一些EC2实例，一些RDS集群。然而，有一个每个人都在使用，但很少有人想到提及的关键服务:AWS身份和访问管理(IAM)。请他们描述他们的IAM部署，您可能会得到各种各样的答案。一些人可能会耸耸肩，一些人可能会清楚地表达精心制定的安全策略，而一些人可能会给出所有的“* * *”。</p><p>可悲的是，尽管IAM是AWS云服务的一个基本部分，但在讨论AWS的使用时，它往往只是被顺便考虑一下。有时，混乱和违反直觉的行为会导致组织拥有复杂、难以管理的IAM基础设施。这给整个公司及其数字基础设施带来了明显的安全风险。</p><p>幸运的是，工程组织可以采取一些简单的步骤来确保他们的IAM架构具有更强的安全性。</p><hr class="wp-block-separator"/><p class="has-text-align-center" id="h-your-keys-to-a-better-career"><strong>通往更好职业的钥匙</strong></p><p class="has-text-align-center"><a href="https://acloudguru.com/pricing">立即开始ACG </a>通过AWS、Microsoft Azure、Google Cloud等领域的课程和实际动手实验室来改变你的职业生涯。</p><hr class="wp-block-separator"/><h2 id="h-what-is-iam">我是什么？</h2><p>在我们深入IAM安全最佳实践之前，让我们快速回顾一下IAM实际上是什么，以及它如何适应AWS服务。如果您想更深入地了解IAM的基础知识，<a href="https://acloudguru.com/course/aws-identity-and-access-management-iam-concepts">本课程为IAM概念提供了很好的介绍</a>。</p><p>基本上，<a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/introduction.html" target="_blank" rel="noreferrer noopener"> IAM </a>是一个基于角色的访问控制(RBAC)系统。几乎所有AWS服务的访问和授权都是通过IAM定义和发布的。与任何RBAC一样，IAM基于角色或身份的概念授予访问权限。通过策略为角色分配权限，以执行各种任务和访问服务。</p><p>在IAM中，角色有三种主要形式:用户、角色和组。IAM用户是AWS新用户首先会遇到的，因此从那里开始我们的最佳实践是有意义的。</p><h2 id="h-iam-security-best-practices-basic">IAM安全最佳实践-基础</h2><p>保护IAM不需要复杂的安全措施或复杂的监控系统。您可以立即采取一些基本步骤来显著改善您的IAM安全状况。</p><p>在上述基础课程的基础上，您可以利用<a href="https://acloudguru.com/course/introduction-to-identity-and-access-management-iam">中级IAM课程</a>进一步了解IAM并学习更高级的用法。</p><h3 id="h-iam-root-user">IAM根用户</h3><p>IAM根用户是首先要关注的事情之一。直接借用<a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/introduction.html" target="_blank" rel="noreferrer noopener"> AWS指南</a>:</p><p>我们强烈建议您不要在日常任务中使用root用户，即使是管理任务。相反，请遵循最佳实践，仅使用root用户来创建您的第一个IAM用户。然后安全地锁定根用户凭据，并使用它们来执行少量的帐户和服务管理任务。</p><p>root用户是AWS帐户或组织中的顶级身份。它不仅可以完全访问所有服务，还可以控制计费和其他管理功能。将其用于常规任务会使其面临潜在的危害，这将是灾难性的，在多帐户部署中更是如此。</p><p>如果您当前使用的是IAM root用户，您应该立即:</p><ol><li>为管理和技术工作创建一个单独的IAM用户。</li><li>禁用并删除root用户可能拥有的任何凭据对。</li></ol><p>根用户与日常访问的进一步逻辑分离可以通过<a href="https://docs.aws.amazon.com/awsaccountbilling/latest/aboutv2/consolidated-billing.html" target="_blank" rel="noreferrer noopener">多个AWS帐户、AWS组织和合并计费</a>来实现。AWS提供了关于使用多个帐户的<a href="https://aws.amazon.com/organizations/getting-started/best-practices/" target="_blank" rel="noreferrer noopener">最佳实践指南</a>，但简单的第一步是在您的主帐户中创建一个<a href="https://docs.aws.amazon.com/organizations/latest/userguide/orgs_tutorials_basic.html" target="_blank" rel="noreferrer noopener"> AWS组织</a>，并创建第二个帐户来存放正在使用的实际基础架构和托管服务。</p><p>第一个帐户将包含能够访问计费和顶级管理的关键功能的根用户。但是，它不包含基础设施或活动的服务端点，大大减少了潜在的攻击面。</p><p>第二个帐户将包含实际的基础架构，但是在出现妥协的情况下，您仍将保留对组织的顶级控制，并且可以与AWS支持合作来重新保护您的资源。</p><h3 id="h-enforce-mfa">强制MFA</h3><p>遵循减少潜在威胁的主题，任何帐户的IAM用户都应该始终启用多因素身份验证(MFA)。<a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_mfa_enable.html" target="_blank" rel="noreferrer noopener"> AWS支持虚拟和硬件MFA令牌</a>，为用户访问提供了关键的额外安全层。可以应用策略来防止在没有有效MFA身份验证的情况下访问任何资源，从而在帐户受到威胁的情况下限制爆炸半径。</p><h3 id="h-what-s-the-worst-case-scenario">最坏的情况是什么？</h3><p>那么，如果这些措施没有实施，潜在的风险是什么？不对用户帐户实施MFA会使他们更容易受到攻击。如果其中一个用户帐户拥有管理员级别的权限，潜在的损害可能会很严重。</p><p>不采取措施保护根用户帐户可能会导致组织的整个AWS架构受到损害，这一事件几乎肯定会造成极大的财务和声誉损失。</p><h2 id="h-iam-security-best-practices-advanced">IAM安全最佳实践–高级</h2><p>好了，我们已经了解了基本情况。现在，让我们来评估一些更高级的保护IAM的技术。如果您想了解更多，请查看我们在IAM 上的高级深度课程。</p><h3 id="h-utilize-iam-groups">利用IAM组</h3><p>如果您的组织仍然使用IAM用户，<a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_groups.html" target="_blank" rel="noreferrer noopener"> IAM组</a>可以提供一种有用的机制来简化策略创建和分配。简化用户的权限和访问控制可以通过简化管理来提高安全性。可以将这些权限分配给一个“管理员”组，而不是将管理职位分别分配给每个管理员，只需凭借组成员资格就可以授予和撤销访问权限。</p><h3 id="h-make-use-of-roles-and-role-assumption">利用角色和角色假设</h3><p><a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use.html" target="_blank" rel="noreferrer noopener"> IAM角色</a>是IAM中最强大、最灵活的概念之一。他们与IAM用户非常相似，除了一个非常重要的例外，即一个角色可以由多个实体承担，甚至可以同时承担。这提供了一个很好的机制来发布更多临时的、短暂的访问授权，而不用担心长期的访问凭证。</p><p>如果像IAM用户这样的身份通过角色的信任策略被授予作为<a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/id_roles_use_permissions-to-switch.html" target="_blank" rel="noreferrer noopener">主体的权限，那么它就可以承担该角色。这使得访问模式更加安全，例如将IAM用户保持在具有最低权限的帐户中，并允许他们在单独的帐户中承担工作角色。</a></p><h3 id="h-implement-resource-based-policies">实施基于资源的策略</h3><p>一些AWS资源，比如S3桶和SQS队列，有称为<a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_identity-vs-resource.html" target="_blank" rel="noreferrer noopener">基于资源的策略</a>的特殊策略。与基于身份的IAM策略不同，基于资源的策略侧重于底层资源本身。IAM将同时评估基于身份的策略和基于资源的策略，允许比单独使用其中一种策略更细粒度的访问控制。</p><h3 id="h-avoid-inline-policies">避免内嵌策略</h3><p><a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/access_policies_managed-vs-inline.html#inline-policies" target="_blank" rel="noreferrer noopener">内联策略</a>是与给定IAM身份直接集成的唯一策略。它们有助于确保只有特定的身份拥有给定的策略，但在大多数情况下，这种情况很少发生。内联策略的广泛使用变得难以管理，并且妨碍了在大量身份之间强制实施同质策略配置和使用。</p><p>有效管理复杂的分布式系统的一个核心原则是能够集中变更管理，这通过使用附加到身份的传统托管策略变得容易得多。</p><h3 id="h-configure-policies-with-conditional-values">使用条件值配置策略</h3><p>IAM策略的一个组成部分是<a href="https://docs.aws.amazon.com/IAM/latest/UserGuide/reference_policies_elements_condition.html" target="_blank" rel="noreferrer noopener">条件</a>。条件元素可以指定策略处于活动状态的一个(或多个)条件。乍一看，有人想要定义缺少安全策略的情况，这似乎是违反直觉的，但是在作为“默认拒绝”操作的策略评估的上下文中，它为进一步控制访问提供了有效的机制。</p><p>例如，IAM管理员可以创建一个策略，授予对某些资源的访问权限，该策略将包含一个条件块，指定该策略仅在接下来的七天内有效。在七天结束时，该策略将不再适用，IAM将拒绝对任何未在其他地方授予的资源的访问。这为经常与承包商和第三方合作的组织提供了一个非常有效的工具。</p><h3 id="h-what-s-the-worst-case-scenario-1">最坏的情况是什么？</h3><p>这些准则侧重于更高级的配置，有助于简化IAM管理和策略管理。使用角色和角色假设大大降低了硬编码凭据被广泛访问的风险。不利用其他实践将最终导致IAM身份和策略的无序、不可管理的集合，从而使保持AWS基础设施安全的旅程更加艰难。<br/></p><h2 id="h-securing-iam-is-critical-to-aws-security">保护IAM对于AWS安全性至关重要</h2><p>到目前为止，您已经知道，即使是最基本的步骤也可以显著提高AWS的安全性。随着越来越多的组织将其软件和数据转移到AWS等云平台，确保适当的安全措施和卫生措施比以往任何时候都更加重要。使用这些信息将有助于提高您的IAM技能，并提高贵组织的AWS安全性。</p><p><strong>关于作者</strong><br/><em><a href="https://mikevanbuskirk.io/" target="_blank" rel="noreferrer noopener">Mike Vanbuskirk</a>是一名首席DevOps工程师和技术内容创作者。他曾与世界上一些最大的云计算、电子商务和CDN平台合作过。他目前的重点是云优先架构和无服务器基础设施。</em></p></div></div>    
</body>
</html>