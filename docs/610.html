<html>
<head>
<title>Beginner's Guide to Azure PowerShell | A Cloud Guru</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Azure PowerShell初学者指南|云专家</h1>
<blockquote>原文：<a href="https://acloudguru.com/blog/engineering/one-shell-to-rule-them-all-5-reasons-to-use-powershell-for-cloud-management#0001-01-01">https://acloudguru.com/blog/engineering/one-shell-to-rule-them-all-5-reasons-to-use-powershell-for-cloud-management#0001-01-01</a></blockquote><div><div class="elementor-widget-container"><p>十多年来，PowerShell一直是Windows管理员最喜欢的解决方案，它能够自动执行微软生态系统中几乎所有的任务。从管理用户帐户、服务器、数据库等等，它的用途是无止境的！有了Azure模块，你可以用同样的基本原则轻松掌控你的Azure环境。</p><p>在这篇文章中，我想向您介绍PowerShell和Azure PowerShell，提供一些关于开始使用PowerShell的提示，并给出使用PowerShell进行云管理的五个好理由。</p><hr class="wp-block-separator"/><h2 class="has-text-align-center" id="h-your-keys-to-a-better-career">通往更好职业的钥匙</h2><p class="has-text-align-center"><a href="https://acloudguru.com/pricing">从ACG开始</a>通过AWS、Microsoft Azure、Google Cloud等领域的课程和实际动手实验室改变你的职业生涯。</p><hr class="wp-block-separator"/><p>如果您是PowerShell新手，或者一般来说是脚本新手，可能很难知道从哪里开始。你看到了潜力。你想自动化所有的事情，但是当你不知道你不知道什么的时候，你如何开始使用PowerShell呢？</p><p>让我们先快速介绍一下PowerShell。把这当成一个小小的PowerShell 101。我们将向您介绍一些开始使用PowerShell的技巧，并通过一些实验来学习基础知识。然后，我们将进入Azure PowerShell，更深入地研究一些您想知道的cmdlets，并讨论如何使用Azure PowerShell创建Azure VM。</p><h3>目录</h3><figure class="wp-block-embed is-type-video is-provider-youtube wp-block-embed-youtube wp-embed-aspect-16-9 wp-has-aspect-ratio"><p class="wp-block-embed__wrapper"><strong>PowerShell是什么？</strong></p></figure><h2 id="What-is-PowerShell">简而言之，PowerShell是一种脚本语言和命令行Shell，由微软开发，用作任务自动化解决方案。虽然它最初是Windows独占的，但现在它是跨平台的，可以在Linux、macOS和Windows上运行。</h2><p>为什么选择PowerShell？</p><h3>有许多非常好的脚本语言可用，那么为什么要选择PowerShell呢？</h3><p>首先，它的语法布局良好，在各种任务中保持一致，易于学习和有效使用。</p><ul><li>第二，与大多数实用程序不同，它的输出是对象而不是文本，允许您在命令之间进行更高级别的交互。</li></ul><ul><li>最后，因为它是跨平台的，所以您可以编写一个脚本来管理所有的操作系统——即使您有一个混合操作系统的环境(很多人都是这样)。</li></ul><ul><li>PowerShell的所有输入和输出都使用对象，这使得它的工作方式有点像模板。它通过其灵活性和故障诊断及重用代码的能力，实现了一种更自然、更实用的脚本编写方法。</li></ul><p>它的两个主要特性是模块和cmdlets。</p><p>什么是模块？</p><h3>模块是组合在一起的一组相关功能和资源。您可以安装用于查询数据库、管理VMware环境或排除网络故障的模块。你甚至可以创建自己的模块。</h3><p>Azure PowerShell实际上是一个你安装使用的PowerShell模块。(我们稍后将深入探讨Azure PowerShell。)</p><p>什么是cmdlet？</p><h3>cmdlet是执行操作的单个轻量级命令。</h3><p><meta charset="utf-8"/>首先要知道PowerShell的cmdlets是以<em>动词-名词</em>格式构建的。因此，如果我想要得到一个命令列表，那么我可以直观地知道使用<code>Get-Command</code>。这将为我拉回系统上所有可用命令的列表。</p><p>获得帮助</p><h3 id="h-getting-help">命令列表很棒，但前提是你知道如何使用它们。因为帮助是我们需要得到的，所以我们可以通过PowerShell深思熟虑的语法再次知道<code>Get-Help</code>是我们需要运行的。</h3><p>将它与cmdlet名称一起使用，如下所示，您将获得从语法定义到完整示例的信息。默认情况下返回基本信息，但是一定要添加<strong> -full </strong>标志来返回所有信息。</p><p><code>Get-Help Get-Process -full</code></p><p>另外，记住不要把事情搞得太复杂。我们的本能是谷歌我们的问题，无论是脚本语法还是如何修补干墙。跟着你的直觉走！</p><p>微软在他们所有的cmdlet在线上都有很棒的文档，简单地谷歌一下cmdlet名称就能让你很快找到。在使用PowerShell十多年后，我们也在做同样的事情——所以这并不可耻！</p><p>探索PowerShell的cmdlets</p><h2 id="h-exploring-powershell-s-cmdlets">你可以自己开始探索PowerShell的cmdlets，但是让我们给你一些我们最喜欢的例子来激发你的创造力。</h2><p>查找特定模块的Cmdlets</p><h3 id="h-find-cmdlets-of-a-specific-module">很多时候，您正在使用一个特定的产品，但是可能已经安装了几个模块。在这些情况下，当简单地运行<code>Get-Command</code>时，很难对所有可用的cmdlets进行排序。对于这些情况，将您的搜索限制到特定的模块，甚至特定的动词！例如，如果我想查看Azure SQL模块中的所有“Get-”cmdlet，我可以运行以下命令:</h3><p><code>Get-Command -Module Az.SQL -Verb Get</code></p><p>为Win安装管道</p><h3 id="h-piping-objects-for-the-win">如前所述，PowerShell优于其他语言的突出特性之一是输出对象而不仅仅是纯文本的能力。</h3><p>例如，要列出Linux机器上的进程，我会使用命令<code>ps</code>。这当然有效，但是如果您需要做一些更强大的事情，比如通过管道将输出传递给<code>kill</code>命令，该怎么办呢？为此，您必须使用其他命令来解析字符串输出，比如<code>grep</code> <strong> </strong>和<code>awk</code>。可能看起来像这样:</p><p><code>kill $(ps -e | grep httpd | awk '{print $1}')</code></p><p>然而，由于PowerShell输出对象而不是简单的纯文本，我们可以很容易地引用由<code>Get-Process</code>列出的每个进程，以及这些对象的单个元素。要执行上面列出的相同操作，我们可以这样做:</p><p><code>Get-Process httpd | Stop-Process</code></p><p>这是一个更简单、更优雅的操作，因为我们将关于“httpd”的信息作为一个对象进行传递，这使得我们要传递到的cmdlet可以很容易地辨别出它所需要的信息。当我们将变量设置为等于cmdlet结果时，情况也是如此，如下所示:</p><p><code>$var = Get-Process httpd</code></p><p><code>$var.Id</code></p><p>在上面的例子中，我设置变量<code>$var</code>等于cmdlet返回的对象。然后，我可以通过添加句点和属性名来引用Id属性。这在编写脚本时变得非常强大，允许您轻松访问您需要的确切信息，而无需大量复杂的<code>grep</code>、<code>awk</code>、或<code>sed</code>操作。</p><p>有一个模块可以解决这个问题</p><h3 id="h-there-s-a-module-for-that">PowerShell与众不同的另一个方面是它的模块库以及这些模块之间的一致性。无论我是针对Azure、Active Directory还是SQL Server编写脚本，都有一个相应的模块。我可以导入其中的一个或全部，并与另一个一起使用。我甚至可以从PowerShell Gallery中下载第三方模块，并将它们循环使用。一些很酷的例子是:</h3><p><strong>在远程实例上执行SQL Server代理作业:</strong></p><p id="h-executing-sql-server-agent-jobs-on-a-remote-instance"><code>Invoke-Sqlcmd -ServerInstance "SQLINSTANCENAME" -Database MSDB -query "EXEC dbo.sp_start_job N'My_AwesomeJob';"</code></p><p><strong>将广告组成员资格从一个用户复制到另一个用户:</strong></p><p id="h-copy-ad-group-memberships-from-one-user-to-another"><code>Get-Aduser user1 -Properties memberof | select -ExpandProperty memberof | ForEach-Object -Process {$groupName = ($_ -split ',*..=')[1]; Add-ADGroupMember -Identity $groupName -Members user2}</code></p><p><strong>启用Windows防火墙规则组:</strong></p><p id="h-enable-windows-firewall-rule-groups"><code>Enable-NetFirewallRule -DisplayGroup "Remote Service Management","Remote Event Log Management","Remote Desktop"</code></p><p>Azure PowerShell是如何工作的？</p><h2 id="How-does-Azure-PowerShell-work">当您安装Azure PowerShell模块时，SDK会作为模块的一部分自动安装——这是PowerShell中使用模块的众多酷功能之一。</h2><p>你可能连接到Azure的每一种方式都通过一个叫做Azure资源管理器的管理接口。该接口验证并授权您想要执行的任何操作。对于Azure PowerShell和Azure命令行界面，它们使用软件开发工具包(SDK)来连接到Azure资源管理器并执行操作。</p><p><a href="https://get.acloudguru.com/cloud-dictionary-of-pain"> <strong>得到蔚蓝云痛苦辞典</strong> </a> <br/>说云不一定要辛苦。我们分析了数以百万计的回复，找出了最容易让人犯错的概念。抓住这个<a href="https://get.acloudguru.com/cloud-dictionary-of-pain" target="_blank" rel="noreferrer noopener">云指南</a>获取Azure <a>中一些最痛苦术语的简洁定义。</a></p><hr class="wp-block-separator"/><figure class="wp-block-image"><a href="https://get.acloudguru.com/cloud-dictionary-of-pain" target="_blank" rel="noreferrer noopener"><img loading="lazy" src="../Images/93ebf63b88ab7fbd48705a01952ba688.png" alt="Complete guide to the Cloud and Dictionary " class="wp-image-42660" srcset="https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_960/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2020/12/Cloud-Dictionary-Resource-Image.jpg 960w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_300/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2020/12/Cloud-Dictionary-Resource-Image.jpg 300w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_768/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2020/12/Cloud-Dictionary-Resource-Image.jpg 768w" sizes="(max-width: 960px) 100vw, 960px" data-original-src="https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2020/12/Cloud-Dictionary-Resource-Image.jpg"/></a></figure><p class="has-text-align-center">你用PowerShell做什么？</p><hr class="wp-block-separator"/><h2 id="What-do-you-use-PowerShell-for">PowerShell中有如此多的特性、实用程序和模块，您可以创建、管理、监控和自动化的唯一限制就是您自己的想象力！你还想要例子吗？当然可以！</h2><p>使用它升级到您的网站，管理您的web应用程序</p><ul><li>使用它将您的文件服务器迁移到Azure blob存储</li><li>您甚至可以创建和管理您的用户，并分配角色或其他组成员</li><li>这就是令人难以置信的地方。PowerShell模块有数百个，包括用于<a href="https://acloudguru.com/blog/engineering/what-is-amazon-web-services-aws" target="_blank" rel="noreferrer noopener"> AWS </a>、<a href="https://acloudguru.com/blog/engineering/what-is-google-cloud-platform-gcp" target="_blank" rel="noreferrer noopener"> GCP </a>、<a href="https://acloudguru.com/blog/engineering/what-is-vmware-hybrid-cloud" target="_blank" rel="noreferrer noopener"> VMware </a>等等的模块。PowerShell确实是所有管理任务的一站式商店。</li></ul><p>Azure PowerShell易于使用，功能强大，非常灵活，允许用户基于他们的语言知识来管理和自动化大量其他解决方案、产品和服务。</p><p>比尔·盖茨曾经说过:“我选择一个懒惰的人去做一件艰苦的工作。因为一个懒惰的人会找到一个简单的方法去做。”对我来说，这就是Azure PowerShell。这是管理Azure资源的简单方法。从自动化您的日常任务到复杂的脚本和部署场景，PowerShell都能满足您的需求。</p><p>Azure PowerShell入门</p><h2 id="Getting-started-with-Azure-PowerShell">让我们看看如何安装Azure PowerShell，如何访问它，以及如何使用它来管理您的Azure资源。</h2><p><em>安装Azure PowerShell </em></p><h3>只需两步即可安装Azure PowerShell:</h3><p>右键单击“开始”菜单并打开Windows PowerShell。<br/></p><ol><li>在命令行中，运行<code>Install-Module</code> cmdlet。使用<code>Az</code>作为名称参数，并在末尾添加一个<code>Force</code>开关。</li><li>如何访问Azure PowerShell</li></ol><pre class="wp-block-code"><code>Install-Module -Name Az -Force</code></pre><h2 id="How-to-access-Azure-PowerShell">安装完成后，您有三个连接到PowerShell的选项:</h2><p><strong>本地</strong>:使用Connect-aza account cmdlet连接到您的Azure帐户。当您看到Microsoft Azure弹出窗口时，请登录您的Azure帐户。您现在已登录Azure。</p><ul><li><strong>云壳</strong>:去shell.azure.com。当您看到Microsoft Azure弹出窗口时，请登录您的Azure帐户。如果这是您第一次登录，它会显示没有装载存储，因此您需要创建存储。有两种不同的环境可供选择——PowerShell和Bash。确保您使用的是PowerShell。</li></ul><ul><li><strong> Azure门户</strong>:进入Azure门户。右上角的菜单中有一个命令提示符图标(见下图)。它将打开屏幕底部的一个外壳。同样，您可以在PowerShell和Bash之间进行选择。您也可以调整此窗口的大小。</li></ul><ul><li>了解基本Azure cmdlets</li></ul><h2 id="Understanding-basic-Azure-cmdlets">如上所述，cmdlet是PowerShell语法的基本组件。它包含执行某个操作所需的所有代码。例如，<code>Get-AzResourceGroup</code>将列出我所有可用的资源组。</h2><p><strong>参数和自变量</strong></p><h3>许多cmdlets也有收集信息的参数，以便执行该操作。如果我在我的<meta charset="utf-8"/> <code>Get-AzResourceGroup</code> cmdlet后面加上一个空格和一个连字符，我就可以使用tab键来滚动所有可用的不同参数。有些是必需的，有些是可选的。一旦到达可用参数的末尾，它将返回到列表的开头。</h3><p>为了向参数提供信息，您需要输入一个参数。在参数后面，你要加一个空格，你要在双引号内提供参数。例如:</p><p>按回车键，你就会得到信息。</p><pre class="wp-block-code"><code>Get-AzResourceGroup -Name "ctrl-alt-sweets'</code></pre><p><strong> <em>变量</em> </strong></p><h3>PowerShell是一种面向对象的语言，这意味着您可以创建一个变量，然后在脚本中使用它。让cmdlet成为变量很简单。</h3><p>PowerShell中的变量由美元符号后跟名称来定义。在本例中，我将为资源组命名为RG，然后添加等号。</p><p>这一次当你按下回车键时，没有信息返回。这是因为信息现在存储在变量中。如果您通过简单地命名变量来再次查询该变量，它会返回已经提取的信息。</p><pre class="wp-block-code"><code>$RG = Get-AzResourceGroup -Name "ctrl-alt-sweets'</code></pre><p>返回的每一条不同的信息都可以单独引用。</p><p>例如，如果我调用变量并使用一个点，并且我要搜索类似于<code>location</code>的东西，它将返回该信息。这对于在脚本中引用这些信息非常有用。</p><p><strong>获得帮助</strong></p><h3>所有cmdlets都有帮助。输入<code>Get-Help</code>，然后输入您想要获得帮助的cmdlet。当您按Enter键时，它会给出一个概要、完整的语法列表、cmdlet功能的描述、相关链接，有时还会给出相关的命令、示例和其他注释。</h3><p>您也可以在<code>Get-Help</code>和您的cmdlet中使用参数。</p><figure class="wp-block-image size-full"><img loading="lazy" src="../Images/3a76b21d3cb8e0917eb14d9cd84184a4.png" alt="" class="wp-image-85097" srcset="https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_970/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/11/powershell-10.png 970w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_300/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/11/powershell-10.png 300w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_768/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/11/powershell-10.png 768w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_380/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/11/powershell-10.png 380w" sizes="(max-width: 970px) 100vw, 970px" data-original-src="https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/11/powershell-10.png"/></figure><p>如上所示，如果您为带有<code> Get-AzResourceGroup</code>的示例添加一个参数，它将返回几个基于不同信息的示例。</p><pre class="wp-block-code"><code>Get-Help Get-AzResourceGropu -examples</code></pre><p>如何使用Azure PowerShell创建Azure VM</p><h2 id="How-to-create-an-Azure-VM-using-Azure-PowerShell">要创建VM，首先使用<code>New-AzResourceGroup</code>创建Azure资源组。你会想把它变成一个变量，因为当你创建Azure VM时，你需要它来传递信息。请务必添加名称和位置参数。</h2><p>接下来，您将使用<code>New-AzVM</code>创建Azure VM，使其也成为一个变量。</p><pre class="wp-block-code"><code>$ResourceGroup = New-AzResourceGroup -Name "AzurePShell" -Location "CentralUS"</code></pre><p>确保传递资源组名称变量和位置变量，然后添加name参数。这些项目是创建虚拟机所必需的。</p><p> </p><p>一旦你按下回车键，PowerShell将要求你的凭证。这些不是您的凭证，而是虚拟机的凭证。请记住，密码具有与Azure门户相同的复杂性要求。</p><pre class="wp-block-code"><code>$AzureVM = New-AzM -ResourceGroupName $ResourceGroup.ResourceGroupName -Location $ResourceGroup.Location -Name "AzurePSVM"</code></pre><p>PowerShell将完成创建虚拟机的过程。</p><p>输入您创建的虚拟机的变量，您将看到它具有完全限定的域名、位置和虚拟机ID。您不仅可以看到该命令的所有输出，还可以将这些输出用作传递给其他cmdlets或脚本的信息。</p><p>要检查并查看它是否已被创建，请转到Azure门户并从hamburger菜单中选择虚拟机。</p><figure class="wp-block-image size-full"><img loading="lazy" src="../Images/7391d0418bd76faa3d25a466e186387c.png" alt="" class="wp-image-85101" srcset="https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_970/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/11/powershell-12.png 970w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_300/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/11/powershell-12.png 300w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_768/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/11/powershell-12.png 768w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_380/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/11/powershell-12.png 380w" sizes="(max-width: 970px) 100vw, 970px" data-original-src="https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/11/powershell-12.png"/></figure><p>然后单击虚拟机以查看详细信息。</p><figure class="wp-block-image size-large"><img loading="lazy" src="../Images/1982b79eea087dc9cce902d58acfb928.png" alt="" class="wp-image-85102" srcset="https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_1054/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/11/powershell-13.png 1054w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_300/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/11/powershell-13.png 300w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_1024/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/11/powershell-13.png 1024w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_768/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/11/powershell-13.png 768w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_380/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/11/powershell-13.png 380w" sizes="(max-width: 1054px) 100vw, 1054px" data-original-src="https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/11/powershell-13.png"/></figure><p>接下来，您将希望通过使用<code>Remove-AzResourceGroup</code>命令删除资源组来进行清理。请确保包含资源组名称变量。在末尾添加一个Force开关，强制它删除资源组中的所有内容。</p><p>这个命令可能需要一段时间，所以您可能希望使用<code>AsJob</code>开关将这个命令作为一个作业来运行，这样您就可以在此期间继续使用PowerShell。</p><p>当一个Azure虚拟机被创建时，它会随之创建大量其他Azure资源。因此，通过三行代码，我们能够创建一个资源组，创建一个Azure虚拟机和所有相关资源，并删除该资源组。</p><pre class="wp-block-code"><code>Remove-AzResourceGroup -Name $ResourceGroup.ResourceGroupName -Force -AsJob</code></pre><p><em>希望提升您的云计算技能？查看<a href="https://acloudguru.com/blog/news/whats-free-at-acg">本月的免费ACG课程阵容</a>，包括我们闪亮的新<a href="https://acloudguru.com/course/az-400-designing-and-implementing-microsoft-devops-solutions" target="_blank" rel="noreferrer noopener"> AZ-400 DevOps认证考试课程</a>。只需<a href="https://acloudguru.com/pricing">创建一个免费账户</a>并升级。不需要信用卡！</em></p><hr class="wp-block-separator"/><p class="has-text-align-center">为什么应该使用PowerShell？</p><hr class="wp-block-separator"/><h2 id="Why-should-you-use-PowerShell"><strong> <em>使用PowerShell进行云管理的5个理由</em> </strong></h2><h3>为什么PowerShell在今天作为云管理工具有意义？它可能不是人们的默认选择，尤其是对于自动化Linux的东西。但是这就是PowerShell值得考虑的原因——更重要的是，这就是为什么<em>可能是最好的选择。</em></h3><p>一个不太可能的自动化英雄的崛起</p><h3 id="h-the-rise-of-an-unlikely-automation-hero">到2020年，云计算的增长已经非常巨大。你很难找到一个组织不<a href="https://acloudguru.com/blog/business/what-is-cloud-migration">将部分基础设施迁移到云</a>，如果不是完全转换的话。随着COVID的出现，原本是一场云竞赛变成了全速冲刺。企业突然迫切需要扩展他们的网站，实现远程工作，并提供非接触方式为客户带来价值。没有比通过云更好的方式来实现快速和可扩展的服务，因此人们比以往任何时候都更多地利用它的潜力。</h3><p>随着所有这些新的和现有的云利用，非常需要一个可靠的自动化战略。如果您手动管理所有云资源，保持保持竞争力所需的速度和灵活性很快就会变得非常困难。但是，您使用什么工具来管理所有这些资源，尤其是当您将它们分布在多个云或数据中心时？</p><p>一个不太可能的英雄出现了:PowerShell。</p><p>这可能令人惊讶，特别是考虑到已经有很多像Python这样伟大而流行的工具。是什么让PowerShell值得考虑，更不用说是“最佳”选项了？</p><p>借我你的耳朵，我想告诉你这个经常被忽视的来自微软的害群之马。以下是您应该考虑使用PowerShell进行云管理的五个原因。</p><p>1.跨平台安装</p><h4 id="h-1-cross-platform-installation">您可以在自己选择的机器上使用PowerShell。</h4><p id="h-you-can-use-powershell-from-the-machine-of-your-choice">虽然PowerShell在微软的领导下首次亮相，但现代版本是跨平台的。直到今天，许多人仍然认为它是一个严格的Windows工具。但事实上，随着PowerShell 7的发布，它甚至是开源的。在过去的几年里，微软确实改变了他们的论调，拥抱开源和Linux社区，而PowerShell似乎是其中的一个关键部分。</p><p>这对开发人员和系统管理员来说都是好消息，因为这意味着您可以在自己选择的机器上使用这个强大的自动化工具。只要你有一个网络浏览器，你甚至不需要安装PowerShell。<a href="https://learn.acloud.guru/search?query=&amp;cloudProviders%5B0%5D=Azure&amp;page=1" target="_blank" rel="noreferrer noopener">微软Azure </a>已经将其直接集成到他们的门户中，允许你直接从浏览器中使用Azure云外壳。</p><p>这个工具在后台利用Ubuntu机器为您提供一个shell体验，不仅可以在全球范围内访问，而且可以在会话之间保持不变。</p><p>2.我喜爱的对象</p><h4 id="h-2-object-of-my-affection">PowerShell的一个关键与众不同的特性是它能够处理对象，而不仅仅是文本。</h4><p id="h-a-key-differentiating-feature-of-powershell-is-its-ability-to-work-with-objects-instead-of-simply-text">例如，如果我运行<em> Get-Process </em>，它将为我返回一个正在运行的进程列表。乍一看，这看起来与任何其他工具中的任何其他文本列表一样。但令人惊讶的是，它实际上是一个对象列表。我可以引用该对象的单个属性，甚至可以在其他命令中有选择地使用它们。这种简单的差异在编写脚本或动态使用命令时会产生重大影响，以至于这个特性本身对使用其他工具的用户来说就很有吸引力。</p><p>3.通过你的力量组合</p><h4 id="h-3-by-your-powers-combined">PowerShell模块让你升级你的能力。</h4><p id="h-powershell-modules-let-you-upgrade-your-abilities">PowerShell的另一大特点是模块。基本上，这些是你可以很容易地导入到你的会话中来立即升级你的能力的附件——有点像Neo在他的矩阵训练椅中。</p><p>这不仅允许您使用各种产品(如Active Directory、SQL Server和AWS或GCP资源)，还允许您在同一时间<em>做这件事</em>。这意味着您可以使用一个脚本来管理本地AD权限，从数据库中提取查询，并提供云资源。可能性真的是无限的，完全由你定制。</p><p>4.这很有意义</p><h4 id="h-4-it-just-makes-sense">PowerShell的语言直观且可重复。</h4><p id="h-powershell-s-language-is-intuitive-and-repeatable">有时，当我们讨论技术选择时，我们可能会迷失在功能比较、语法细微差别和竞争的杂草中。我们最终会忘记，我们是需要完成工作的人，语言的简单性会对我们的日常工作生活产生巨大影响，无论是好是坏。</p><p>在我看来，这是PowerShell的一个亮点。不太了解PowerShell？别担心。<a href="https://acloudguru.com/course/getting-started-with-powershell" target="_blank" rel="noreferrer noopener">开始使用PowerShell </a>很容易。这种语言的整个结构是以一种直观和可重复的方式设计出来的<strong>。</strong>所有命令都采用动词-名词格式。所以你说你想采取的行动，以及你想对什么采取行动。</p><p>如前所述，为了获得流程，我运行了<code>Get-Process</code>。如果我想获得命令列表，我使用<code>Get-Command</code>。如果我想添加一个用户到现有的Azure广告组，我会使用<code>Add-AzADGroupMember</code>。你明白了。</p><p>这不仅有助于记住您经常使用的命令，而且在短时间内，您几乎可以猜出该命令是什么——即使您以前从未使用过它。由于模块之间的一致性，您也可以经常猜测它的参数。这对于那些不熟悉这门语言或自动化的人来说特别有帮助。</p><p><strong> 5。PowerShell酷毙了</strong></p><p id="h-5-powershell-is-freaking-cool">最后一个非常技术性的观点:PowerShell非常有趣。</p><p id="h-one-last-very-technical-point-powershell-is-just-a-lot-of-fun">在我职业生涯的早期，我在完成一个项目后遇到了PowerShell，在这个项目中，我必须维护一个遗留的VBScript文件。在那次痛苦的经历之后，踏入PowerShell(当时还处于起步阶段)就像喝了一口水。我无法相信完成强大的任务是如此容易，而且随着时间的推移，它只会变得更好。从那以后，我有机会在各种脚本和日常管理任务中使用它，编写自己的模块，并在多个操作系统和环境中实现它。这是一次我非常享受的狂野之旅，而且越走越有趣。</p><p>TL；博士？</p><h3 id="h-tl-dr">以下是PowerShell如此神奇的原因。</h3><p>Powershell是一种脚本语言和Shell，您可以从任何机器上运行它(甚至是没有安装它的机器，通过云Shell)。</p><ul><li>它可以管理Windows和Linux机器。</li><li>PowerShell允许您管理Azure、AWS和GCP上的云资源。</li><li>PowerShell允许您以简单但强大的方式完成所有这些工作。将所有这些都放入Azure PowerShell Runbook中，您的同事也可以用一种可重复的方式来完成这些任务。</li><li>不要让它是微软制造的这个事实欺骗了你，也不要被对它的普遍误解所阻碍。亲自了解新的PowerShell，我想你会像我一样喜欢它。</li></ul><p>使用ACG启动您的PowerShell游戏</p><h2 id="h-power-up-your-powershell-game-with-acg">想了解更多关于PowerShell的信息吗？查看一些云专家的其他PowerShell课程。</h2><p><em>想跟上万物云？</em> <a href="https://www.youtube.com/c/AcloudGuru/?sub_confirmation=1" target="_blank" rel="noreferrer noopener"> <em>在YouTube上订阅一位云大师</em> </a> <em>获取每周云相关新闻。你也可以像我们一样关注</em><a href="https://www.facebook.com/acloudguru" target="_blank" rel="noreferrer noopener"><em/></a><em>，关注我们的</em> <a href="https://twitter.com/acloudguru" target="_blank" rel="noreferrer noopener"> <em>推特</em> </a> <em>，或者加入</em> <a href="http://discord.gg/acloudguru" target="_blank" rel="noreferrer noopener"> <em>不和谐</em> </a> <em>的对话！</em></p><p>兰登·福勒和马克·米库拉对此文亦有贡献。</p><p><em>Landon Fowler and Mark Mikula contributed to this post.</em></p></div></div>    
</body>
</html>