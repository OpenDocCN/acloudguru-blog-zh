<html>
<head>
<title>Extend your Network to Google Cloud using Cloud VPN | A Cloud Guru</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>使用云VPN |云专家将您的网络扩展到Google Cloud</h1>
<blockquote>原文：<a href="https://acloudguru.com/blog/engineering/extend-your-network-to-google-cloud-using-cloud-vpn#0001-01-01">https://acloudguru.com/blog/engineering/extend-your-network-to-google-cloud-using-cloud-vpn#0001-01-01</a></blockquote><div><div class="elementor-full-height elementor-element elementor-element-8a920a5 elementor-widget elementor-widget-theme-post-content" data-id="8a920a5" data-element_type="widget" data-widget_type="theme-post-content.default"><div class="elementor-widget-container"><p>将您的私有内部网络连接到Google云平台上的安全资源的能力非常强大。通过虚拟专用网络(VPN)将您的GCP资源连接到您的专用网络，您可以创建一个加密隧道，将GCP资源与您组织的其他资源放在同一个专用网络上。本指南将向您展示如何创建和配置到GCP的基本VPN连接(或隧道)。首先，几个参数:</p><ul> <li>云VPN通过使用共享密钥(IKEv1或IKEv2)的IPsec连接运行</li> <li>云VPN支持静态和动态路由(使用云路由器时)</li> <li>云VPN适用于站点到站点的VPN连接(即路由器到路由器)，但不支持客户端到站点的连接，例如您用笔记本电脑连接的连接。</li></ul><p>在我们开始之前，您需要从您的本地网络路由器:</p><ul> <li>路由器IP地址</li> <li>您的网络上将通过VPN连接的子网</li> <li>为您的本地路由器VPN设置配置的共享密钥。</li></ul><h2>为VPN隧道选择一个区域(GCP端)</h2><p>默认情况下，GCP项目在全球每个地区都有一个子网，所有子网都在同一个专用网络中。您可以在任何地区建立VPN隧道，并让其他地区可以访问它。为了获得最佳性能，您应该在托管GCP资源的同一区域创建VPN隧道，例如需要访问您的本地网络的虚拟服务器。例如，如果您的大多数GCP资源位于美国中部1的“子网a”中，您可能希望将您的VPN隧道连接到同一个美国中部1区域。请注意，同一区域中可以有多个子网，但是VPN连接只关心它所连接的单个区域。</p><h2>为VPN隧道保留静态IP地址</h2><p>在创建VPN通道之前，您需要保留一个静态IP地址。下面是这样做的步骤。<img loading="lazy" class="alignright size-medium wp-image-10420" src="../Images/f011c933dade8db7b285065db9d2775d.png" data-original-src="https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2020/06/g-c-p-exend-network-300x183.png"/></p><ul> <li>从GCP控制台，从左上角菜单，导航到<strong>网络-VPC网络-外部IP地址</strong>。</li></ul><ul> <li>选择<b>保留静态地址</b>。</li> <li>为保留的地址命名以供参考(在本演示中，我们将使用“vpn-tunnel”)。</li> <li>选择我们的VPN通道将使用的同一个区域。静态IP仅在保留它们的区域可用。请注意，同一个区域中可以存在多个子网。</li> <li>将所有其他设置保留为默认设置，并点击<b>保留</b>。【T2<img loading="lazy" class="size-medium wp-image-10421 aligncenter" src="../Images/64c66653cb9243af0b3a26cb89738fd7.png" data-original-src="https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2020/06/g-c-p-reserve-static-address-251x300.png"/></li></ul><p>创建VPN隧道</p><h2>现在我们已经保留了一个静态IP地址，接下来是创建VPN隧道的有趣部分。从您的GCP控制台，在左上角的菜单中，导航到<b>网络–互联–VPN</b>。<a target="_blank" rel="nofollow noopener noreferrer" href="https://wpengine.linuxacademy.com/wp-content/uploads/2018/01/GCP-VPN.png"> <img loading="lazy" class="alignright size-medium wp-image-10422" src="../Images/b1e2d1582386a9fdf17cede1e9f46669.png" data-original-src="https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2020/06/g-c-p-v-p-n-300x185.png"/> </a>点击<b>创建VPN连接</b>。这将带您到主菜单来创建您的VPN通道。这里有很多要讨论的，所以让我们来分解一下。我们将首先配置我们的VPN网关。</h2><p>给VPN连接一个名称；我们将使用“vpn-1”。</p><ul> <li>选择要使用的VPC网络，我们将使用默认网络。</li> <li>选择创建VPN连接的区域。我们正在使用我们的中心1。</li> <li>选择一个保留的IP地址。请注意，如果我们在不同的地区保留了一个IP地址，它将无法访问。</li> <li><a target="_blank" rel="nofollow noopener noreferrer" href="https://wpengine.linuxacademy.com/wp-content/uploads/2018/01/GC-Engine-VPN.png"> <img loading="lazy" class="alignright size-medium wp-image-10423" src="../Images/19e129f446bbcae9cbf99466386a0bf3.png" data-original-src="https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2020/06/g-c-engine-v-p-n-300x279.png"/> </a>接下来，我们需要配置VPN网关将使用的本地网络隧道。在同一区域的一个VPN网关上可以有多个隧道。</li></ul><p><b>远程对等IP地址</b>是您本地VPN路由器的IP地址。将其输入本栏位。</p><ul> <li>留下艾克版本为IKEv2。</li> <li>输入共享密钥，您需要在本地路由器中进行配置。</li> <li>由于我们在本演示中使用静态路由，因此在<b>路由选项</b>下，选择静态并输入该VPN隧道需要访问的本地网络子网。</li> <li>将所有其他设置保留为默认设置，并点击<b>创建。</b></li> <li>短暂延迟后，您的云VPN连接将成功完成，您的GCP资源将可以通过专用网络访问您公司的内部网络。哇-啦！准备好开始使用谷歌云了吗？这是我们最新的<a target="_blank" rel="noopener noreferrer" href="https://wpengine.linuxacademy.com/linuxacademy-com/google-cloud-online-training-new-releases/" noreferrer="1">谷歌云实践培训内容</a>！如果你对更多的实践教程感兴趣，请务必<a target="_blank" rel="noopener noreferrer" href="https://www.youtube.com/linuxacademycom" noreferrer="1">订阅我们的YouTube频道</a>，我们将在每周四展示谷歌云平台的现场实践演示，更不用说在周三重点介绍最新的谷歌云新闻了！</li></ul><p> After a brief delay, your Cloud VPN connection will be successfully completed and your GCP resources will then have private network access to your company’s on-prem network. Wa-La!Ready to get started with Google Cloud? Here’s our latest <a target="_blank" rel="noopener noreferrer" href="https://wpengine.linuxacademy.com/linuxacademy-com/google-cloud-online-training-new-releases/" noreferrer="1">hands-on Google Cloud training content</a>! If you’re interested in more hands-on tutorials, make sure to <a target="_blank" rel="noopener noreferrer" href="https://www.youtube.com/linuxacademycom" noreferrer="1">subscribe to our YouTube channel</a> where we’ll be demonstrating live hands-on demos of the Google Cloud platform every Thursday, not to mention highlighting the latest Google Cloud news on Wednesdays!</p></div></div></div>    
</body>
</html>