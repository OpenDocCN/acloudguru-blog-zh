<html>
<head>
<title>Vagrant Cheat Sheet + Get Started with Vagrant | A Cloud Guru</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>流浪记小抄+流浪记入门|一个云宗师</h1>
<blockquote>原文：<a href="https://acloudguru.com/blog/engineering/vagrant-cheat-sheet-get-started-with-vagrant#0001-01-01">https://acloudguru.com/blog/engineering/vagrant-cheat-sheet-get-started-with-vagrant#0001-01-01</a></blockquote><div><div class="elementor-widget-container"><p>我们带着另一张小抄回来了——这次是给流浪者的！我们定义了一些常用术语，为您提供了最常用命令的概要，甚至包括一个样例vagger文件，该文件提供了一个基本的CentOS 7 web服务器进行实验。查看小抄，获取里面的基本流浪教程！</p><h2 id="cheat-sheet">小抄</h2><p><a target="_blank" rel="noopener noreferrer" href="https://linuxacademy.com/site-content/uploads/2017/12/vagrant-cheatsheet-Linux-Academy.pdf" noreferrer="1"><img loading="lazy" class="alignnone wp-image-24637 size-large" src="../Images/009eae59f667f791d5fde9d69857a4e4.png" alt="Vagrant Cheat Sheet" data-original-src="https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2020/06/vagrant-cheat-sheet-1024x641.png"/>T2】</a></p><h2 id="get-started-with-vagrant">流浪汉入门</h2><h3 id="prerequisites">先决条件</h3><ul> <li><a target="_blank" rel="nofollow noopener noreferrer" href="https://www.vagrantup.com/downloads.html">流浪汉</a>！流浪汉很容易安装，过程应该只需要几分钟。</li> <li><a target="_blank" rel="nofollow noopener noreferrer" href="https://www.virtualbox.org/">虚拟盒</a></li> <li>Linux，Mac，或者Windows！流浪汉可以在任何操作系统上使用，命令都是一样的。</li> <li>操作系统的基本命令行知识。由于本指南与操作系统无关，我们将使用通用术语，如“进入<code>src</code>目录”,而不是使用任何特定的命令；您应该知道如何在您的系统上执行以下命令:<ul> <li>更改目录</li> <li>打开文本文件</li> <li>添加文本文件</li></ul> </li> <li>Windows用户也应该安装了PuTTY。</li></ul><h3 id="create-your-vagrant-project">创建你的流浪项目</h3><ol type="1"> <li>创建一个我们可以工作的目录。在本指南中，我们将使用通用名称<code>vagrantdir</code>来引用该文件夹。</li> <li>从命令行，移动到<code>vagrantdir</code>文件夹。</li> <li>我们计划创建一个CentOS 7客户机。为此，我们需要找到合适的盒子来使用。公共包厢可以在这里找到<a target="_blank" rel="nofollow noopener noreferrer" href="https://app.vagrantup.com/boxes/search">。在这种情况下，我们使用centos提供的</a><a target="_blank" rel="nofollow noopener noreferrer" href="https://app.vagrantup.com/centos/boxes/7"> centos/7 </a>盒子。除了VirtualBox，这个盒子还兼容VMWare和libvirt提供程序。添加框:<pre><code> vagrant box add centos/7</code></pre></li> <li>我们现在可以创建一个基本的流浪者文件:<pre><code> vagrant init --minimal </code></pre> <blockquote> <p>如果我们在没有<code>--minimal</code>标志的情况下运行<code>vagrant init</code>，我们的流浪者文件将生成指导性注释。出于本指南的考虑，我们选择不包含额外的注释，以便为我们提供一个更清晰的流浪文件。</p> </blockquote></li></ol><h3 id="configure-the-guest-machine-via-the-vagrantfile">通过浮动文件配置客户机</h3><h4 id="basic-settings">基本设置</h4><ol type="1"> <li>Open the newly-created Vagrantfile in your chosen text editor. Currently, it should resemble the following:<pre><code> Vagrant.configure(2) do |config|   config.vm.box = "base" end</code></pre><p>就目前的情况而言，这个浮动文件所做的只是将浮动配置版本定义为<code>2</code> ( <code>Vagrant.configure(2) do |config|</code>)，并将客户机设置为从“基础”框(<code>config.vm.box = "base"</code>)开始工作。注意，盒子配置开头的<code>config</code>直接引用回版本行中的<code>|config|</code>值。我们所有的配置设置都会从<code>config</code>开始。</p></li> <li>更新框以使用我们刚刚添加的CentOS 7:<pre><code> Vagrant.configure(2) do |config|   config.vm.box = "centos/7" end</code></pre></li> <li>我们还想为这个机器定义主机名<em> myhost </em>。我们可以通过简单地将<code>config.vm.hostname = "myhost"</code>添加到我们的代码:<pre><code> Vagrant.configure(2) do |config|   config.vm.box = "centos/7"   config.vm.hostname = "myhost" end</code></pre>中来做到这一点</li> <li>我们也可以在流浪者中配置网络设置。在这个例子中，我们将在一个私有网络范围内设置一个IP地址:<pre><code> Vagrant.configure(2) do |config|   config.vm.box = "centos/7"   config.vm.hostname = "myhost"   config.vm.network "private_network", ip: "192.168.50.10" end</code></pre> <blockquote> <p>如果您已经使用了私有IP 192.168.50.10，请相应地更新游民文件以使用不同的地址。</p> </blockquote></li></ol><h4 id="sync-folders">Sync Folders</h4><p>在vagger中，我们可以将一个文件夹同步到我们的来宾机器中的一个文件夹。因为我们正在创建一个示例web服务器，所以我们希望本地目录保存我们网站的文件。</p><ol type="1"> <li>在您的环境目录下创建一个名为<em> src </em>的目录。</li> <li>要配置<code>src</code>目录同步到<code>/var/www/html</code>目录，使用<code>synced_folder</code>选项:<pre><code> Vagrant.configure(2) do |config|   config.vm.box = "centos/7"   config.vm.hostname = "myhost"   config.vm.network "private_network", ip: "192.168.50.10"   config.vm.synced_folder "src/", "/var/www/html" end</code></pre></li> <li>如果需要，将一个<code>index.html</code>文件添加到您的<code>src</code>目录中，其中包含您想要的任何内容。</li></ol><h4 id="set-up-provisioning">设置供应</h4><p>在创建服务器时，vagger能够与许多配置工具配对来配置您的服务器。最基本的使用简单的shell脚本。这是我们将要使用的。具体来说，我们将使用Ruby语法将一系列命令输入到一个变量中，然后在配置我们的供应的行中调用该变量。</p><ol type="1"> <li>创建一个安装、启用和启动Apache的<code>$samplescript</code>变量。将此<em>放在</em>之前，浮动配置节:<pre><code> $samplescript = &lt;&lt;SCRIPT yum install -y httpd systemctl enable httpd systemctl start httpd SCRIPT Vagrant.configure(2) do |config| [snip]</code></pre></li> <li>将provisioner配置行添加到主代码块:<pre><code> Vagrant.configure(2) do |config|   config.vm.box = "centos/7"   config.vm.hostname = "myhost"   config.vm.network "private_network", ip: "192.168.50.10"   config.vm.synced_folder "src/", "/var/www/html"   config.vm.provision "shell", inline: $samplescript end</code></pre></li></ol><h4 id="configure-virtualbox">配置VirtualBox</h4><p>最后，我们可以使用我们的流浪文件来配置VirtualBox。这是通过在我们的流浪者文件的主要部分中添加一个特定于VirtualBox的代码块来实现的:</p><pre><code>config.vm.provider "virtualbox" do |vb|  vb.memory = "1024"  vb.cpus = "2"end</code></pre><p>注意它的格式是如何类似于浮动配置行的设置的，只是我们没有定义然后将<code>config</code>添加到配置中，而是使用了<code>vb</code>(对于VirtualBox请注意，该值不必相同)。</p><h3 id="the-final-vagrantfile">最后的流浪档案</h3><p>您的最终流浪文件应该如下所示:</p><pre><code>$samplescript = &lt;&lt;SCRIPTyum install -y httpdsystemctl enable httpdsystemctl start httpdSCRIPTVagrant.configure(2) do |config|  config.vm.box = "centos/7"  config.vm.hostname = "myhost"  config.vm.network "private_network", ip: "192.168.50.10"  config.vm.synced_folder "src/", "/var/www/html"  config.vm.provision "shell", inline: $samplescript  config.vm.provider "virtualbox" do |vb|    vb.memory = "1024"    vb.cpus = "2"  endend</code></pre><p>保存并退出文件。</p><h3 id="vagrant-up">流浪起来！</h3><p>完成我们的流浪文件后，返回命令行并确保您在<code>vagrantdir</code>目录中。从这里，我们可以启动我们的虚拟机。在流浪者中启动一个虚拟机是容易的。只需运行:</p><pre><code>vagrant up</code></pre><p>等待设置过程完成。完成后，您可以通过在浏览器中访问<code>192.168.50.10:80</code>来查看web服务器是否工作。我们也可以SSH到我们的服务器。这个过程取决于您的工作站计算机。</p><h4 id="ssh-from-linux-and-mac">来自Linux和Mac的SSH</h4><p>要从Linux或Mac工作站SSH到您的新虚拟机，只需使用:</p><pre><code>vagrant ssh</code></pre><p>请随意花点时间参观CentOS环境。完成后回到你的工作站。</p><h4 id="ssh-from-windows">Windows中的SSH</h4><p>由于您不能从Windows中的命令行SSH到您的虚拟机，我们需要使用SSH客户端，比如PuTTY。首先，从命令行运行<code>vagrant ssh-config</code>来检索虚拟机的IP地址和端口:</p><pre><code>vagrant ssh-config</code></pre><p>接下来，将这些信息输入到PuTTY中；经过迁移调配的虚拟机的默认用户名和密码都是<em>迁移</em>。从这里，我们应该能够连接到您的服务器。借此机会探索来宾机。完成后关闭连接。</p><h3 id="stopping-starting-and-destroying">停止、启动和销毁</h3><p>恭喜你！你刚刚旋转了你的第一个流浪者盒子并且登录了！通常，无论你在做什么项目，你都会继续使用你的流浪环境。但是当你结束一天的工作后呢？您可以通过两种方式关闭机器，<code>vagrant halt</code>和<code>vagrant suspend</code>。</p><h4 id="halt">停止</h4><p>要停止计算机，即尝试正常关机，此时计算机会像物理机一样关闭，请运行以下命令:</p><pre><code>vagrant halt</code></pre><h4 id="suspend">暂停</h4><p>挂起的机器是关闭但没有关闭的机器；本质上，它保存在运行<code>suspend</code>时的确切状态。要暂停机器，请运行:</p><pre><code>vagrant suspend</code></pre><h4 id="resume">简历</h4><p>要启动之前暂停或挂起的机器，请运行:</p><pre><code>vagrant resume</code></pre><h4 id="restart">重新开始</h4><p>您可能还需要重新启动您的机器，以确保您的系统设置通过重新启动或其他方式保持不变。使用以下命令重新启动机器:</p><pre><code>vagrant restart</code></pre><p>重启与运行<code>vagrant halt</code>相同，随后是<code>vagrant resume</code>。</p><h4 id="destroy">破坏</h4><p>如果您永久地结束了您的流浪环境，并希望将其从您的系统中完全删除，请使用:</p><pre><code>vagrant destroy</code></pre><p>出现提示时，确认您希望销毁机器。</p><h3 id="conclusion">结论</h3><p>vagger是一个强大且非常有用的工具，它可以确保你的开发系统无论在什么计算机上运行都是一样的。您可以随意修改和扩展这个示例，如果遇到困难，一定要下载备忘单作为快速参考！坚持练习，你很快就会成为流浪专家。</p></div></div>    
</body>
</html>