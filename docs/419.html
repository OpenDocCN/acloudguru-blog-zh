<html>
<head>
<title>Using EventBridge to centralize AWS Organizations events | A Cloud Guru</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>使用EventBridge集中AWS组织事件|云专家</h1>
<blockquote>原文：<a href="https://acloudguru.com/blog/engineering/how-to-use-eventbridge-to-centralize-aws-organizations-events#0001-01-01">https://acloudguru.com/blog/engineering/how-to-use-eventbridge-to-centralize-aws-organizations-events#0001-01-01</a></blockquote><div><div class="elementor-widget-container"><p>Amazon EventBridge是一种无服务器的事件路由服务，允许我们实时对传入的事件做出反应。在本帖中，我们将采用一个场景，展示如何在AWS组织内实现跨帐户通知，然后利用EventBridge将集中的事件流转发到第三方SaaS工具。</p><hr class="wp-block-separator"/><p class="has-text-align-center"><strong>加速您的云计算职业生涯</strong></p><p class="has-text-align-center">云专家让你轻松(也很棒)提升你的云事业——即使你对技术完全陌生。查看<a href="https://acloudguru.com/blog/news/whats-free-at-acg" target="_blank" rel="noreferrer noopener"> ACG的免费课程</a>或<a href="https://acloudguru.com/pricing">现在就开始</a>免费试用。</p><hr class="wp-block-separator"/><h2 id="h-what-is-amazon-eventbridge">什么是亚马逊EventBridge？</h2><p>Amazon EventBridge是AWS提供的原始CloudWatch Events服务的演变。它允许我们利用无服务器事件总线，根据我们帐户内的传入事件实时执行操作任务。</p><p>这项服务的美妙之处在于我们可以完全定制实现。以前，当我们必须使用CloudWatch事件时，我们只能利用默认的事件总线，并且集成选项非常有限。</p><p>然而，使用Amazon EventBridge允许我们从头到尾完全定制选项和设置。</p><ul><li>您的团队想要几个定制的事件总线用于不同的用例？亚马逊EventBridge提供了这种服务。</li><li>您想要配置多个规则以允许在单个事件总线上并行处理事件吗？亚马逊EventBridge也提供这种服务。</li><li>哦，你还希望能够在AWS帐户和地区之间发送事件？！亚马逊EventBridge。😉</li></ul><h2 id="h-third-party-saas-vendors">第三方SaaS供应商</h2><p>Amazon EventBridge为我们提供了许多默认的集成，截至本文发布时，共有<a href="https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-saas.html" target="_blank" rel="noreferrer noopener"> 34个认证合作伙伴</a>。相当令人印象深刻！</p><p>这些受支持的集成使我们能够轻松地将我们的事件总线与我们选择的SaaS供应商连接起来——比如DataDog、PagerDuty和MongoDB等等。</p><p>当使用这些支持的平台时，我们根据发送到Amazon EventBridge和从Amazon event bridge接收的数据执行我们自己的自定义操作。</p><p>一个完美的例子是传呼机责任。我们可以轻松监控我们帐户中的特定事件模式，当匹配时，利用一个使用PagerDuty连接的规则，以便我们的运营团队可以接收警报并采取适当的补救措施或步骤。</p><hr class="wp-block-separator"/><figure class="wp-block-image size-large"><a href="https://acloudguru.com/blog/engineering/10-fun-hands-on-projects-to-learn-aws"><img loading="lazy" src="../Images/d262d9fd5f31b44b9523be4d196047d1.png" alt="Hands On Cloud Blog Header" class="wp-image-64096" srcset="https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_1655/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/10/21.10.08.10HandsOnProjects.jpg 1655w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_300/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/10/21.10.08.10HandsOnProjects.jpg 300w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_1024/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/10/21.10.08.10HandsOnProjects.jpg 1024w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_768/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/10/21.10.08.10HandsOnProjects.jpg 768w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_1536/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/10/21.10.08.10HandsOnProjects.jpg 1536w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_380/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/10/21.10.08.10HandsOnProjects.jpg 380w" sizes="(max-width: 1655px) 100vw, 1655px" data-original-src="https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2021/10/21.10.08.10HandsOnProjects.jpg"/></a></figure><p class="has-text-align-center"><strong> <a href="https://acloudguru.com/blog/engineering/10-fun-hands-on-projects-to-learn-aws" target="_blank" rel="noreferrer noopener">学习AWS的10个有趣的动手项目<br/> </a> </strong>学习AWS没有比使用所提供的服务来构建真实世界的应用程序更好的方法了。看看这些<a href="https://acloudguru.com/blog/engineering/10-fun-hands-on-projects-to-learn-aws" target="_blank" rel="noreferrer noopener"> 10个好玩的AWS项目</a>，难度各不相同。</p><hr class="wp-block-separator"/><h2 id="h-aws-default-services">AWS默认服务</h2><p>你会问，我们可以在EventBridge中使用多少AWS服务？嗯，简单来说，一个<strong> lot </strong>！</p><p>下面是当前支持的AWS服务的详细列表，这些服务可以生成默认的服务事件，这些事件很容易与EventBridge一起使用:<a href="https://docs.aws.amazon.com/eventbridge/latest/userguide/eb-service-event.html" target="_blank" rel="noreferrer noopener">来自AWS服务的事件</a></p><p>如您所见，有许多服务可供我们使用！</p><p>让我们以这个示例架构为场景:</p><figure class="wp-block-image size-large"><img loading="lazy" src="../Images/dcd4fc1e1c003c0382b7b98f8771b199.png" alt="" class="wp-image-118543" srcset="https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_1920/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2022/03/blog_post_diagram_001.png 1920w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_300/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2022/03/blog_post_diagram_001.png 300w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_1024/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2022/03/blog_post_diagram_001.png 1024w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_768/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2022/03/blog_post_diagram_001.png 768w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_1536/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2022/03/blog_post_diagram_001.png 1536w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_380/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2022/03/blog_post_diagram_001.png 380w" sizes="(max-width: 1920px) 100vw, 1920px" data-original-src="https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2022/03/blog_post_diagram_001.png"/></figure><h3 id="h-scenario">方案</h3><p>我们有一个托管在EC2 compute上的简单内部应用程序，它运行在一个自定义软件上，该软件在一个私有的S3存储桶中存储和更新。</p><p>早些时候，在实现EventBridge之前，每当我们想要更新软件时，都会花费运营团队数小时的时间。</p><p>现在，使用EventBridge，我们可以将这个过程从几个小时缩短到仅仅几分钟(T3)。通过利用来自托管我们的定制软件的特定私有存储桶的S3 <code>PutObject</code> API调用，我们可以在我们的事件总线上创建EventBridge规则，并进行模式匹配。一旦生成了<code>PutObject</code>事件，我们就利用EventBridge规则来监视特定资源(<em> S3桶</em>)上的特定事件(<em> PutObject </em>)。</p><p>使用我们创建的规则，我们可以设置一个定制Systems Manager自动化文档的目标，该文档使用<code>RunCommand</code>功能在目标EC2实例上执行软件更新EventBrige允许我们完全自动化那些需要花费大量时间才能完成的繁琐任务。</p><p>EventBridge允许我们实施一个完全无服务器的解决方案来自动化我们的定制软件更新！🚀</p><h2 id="h-aws-organizations">AWS组织</h2><p>我们前面提到的EventBridge提供的一个令人惊叹的功能是使用跨帐户和跨地区设计来利用服务的能力。由于这个强大的功能，我们可以利用EventBridge来帮助我们根据AWS组织内任何帐户中发生的事件采取行动。</p><p>以下面的图表为例:</p><figure class="wp-block-image size-large"><img loading="lazy" src="../Images/79e2faa2b407e9215015a65d1f55cfb8.png" alt="" class="wp-image-118544" srcset="https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_1920/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2022/03/blog_post_diagram_002.png 1920w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_300/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2022/03/blog_post_diagram_002.png 300w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_1024/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2022/03/blog_post_diagram_002.png 1024w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_768/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2022/03/blog_post_diagram_002.png 768w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_1536/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2022/03/blog_post_diagram_002.png 1536w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_380/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2022/03/blog_post_diagram_002.png 380w" sizes="(max-width: 1920px) 100vw, 1920px" data-original-src="https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2022/03/blog_post_diagram_002.png"/></figure><h3 id="h-scenario-1">方案</h3><p>通过在安全帐户的SecOps事件总线上设置一个资源策略，SecOps小组可以很容易地允许组织内的所有帐户(或特定的组织单位)向集中的事件总线发送事件。然后，他们可以通过事件总线上的规则进行模式匹配，该规则查找从组织帐户中生成的需要审查和潜在解决的特定事件。</p><p>对于上面的这个例子，我们有一个初级工程师，他恶意地或意外地从他们的开发帐户中删除了一个Amazon弹性容器注册映像。SecOps不希望任何初级工程师能够清除图像；相反，他们只希望高级工程师这样做。</p><p>为了识别此类问题，他们与组织共享其事件总线，创建允许组织跨帐户和跨区域发送事件的资源策略，然后在每个子AWS帐户的默认事件总线上实现一个规则。</p><p>此默认规则将是传入ECR事件中删除操作类型字段的模式匹配。一旦匹配，它会将该事件发送到SecOps帐户事件总线，然后他们可以按照自己认为合适的方式处理该事件。</p><p>在本例中，他们只需使用社交网络向SecOps工程师团队发送警报。然而，我们也可以集成一个像PagerDuty这样的SaaS来处理警报和通知。</p><h2 id="h-learn-more-about-amazon-eventbridge">了解更多关于Amazon EventBridge的信息</h2><p>如果你准备好了解更多关于亚马逊EventBridge服务及其提供的所有惊人功能，一定要查看亚马逊EventBridge 课程的<a href="https://learn.acloud.guru/course/introduction-to-amazon-eventbridge/dashboard" target="_blank" rel="noreferrer noopener">介绍。</a></p><p>在本课程中，我们将介绍服务本身的基础知识，并对其工作原理有一个深入的了解。在基础之上，我们将在更深的层次上深入一些中间话题。我们将讨论诸如事件源、事件规则和目标或API目的地之类的东西。甚至会有一个部分显示我们可以在何处以及如何实施基于跨帐户资源的策略，该策略允许我们利用跨帐户和跨区域EventBridge架构。</p><h3>跟上所有云的步伐</h3><p><em> <a href="https://www.youtube.com/c/AcloudGuru/?sub_confirmation=1">在YouTube上订阅云专家</a>的每周云新闻和更新。您也可以在<a href="https://www.facebook.com/acloudguru">脸书</a>上喜欢我们，在<a href="https://twitter.com/acloudguru"> Twitter </a>上关注我们，或者在<a href="http://discord.gg/acloudguru"> Discord </a>上加入对话！</em></p><hr class="wp-block-separator"/><figure class="wp-block-image"><a href="https://get.acloudguru.com/cloud-dictionary-of-pain" target="_blank" rel="noreferrer noopener"><img loading="lazy" src="../Images/93ebf63b88ab7fbd48705a01952ba688.png" alt="Complete guide to the Cloud and Dictionary " class="wp-image-42660" srcset="https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_960/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2020/12/Cloud-Dictionary-Resource-Image.jpg 960w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_300/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2020/12/Cloud-Dictionary-Resource-Image.jpg 300w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_768/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2020/12/Cloud-Dictionary-Resource-Image.jpg 768w" sizes="(max-width: 960px) 100vw, 960px" data-original-src="https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2020/12/Cloud-Dictionary-Resource-Image.jpg"/></a></figure><p class="has-text-align-center"><a href="https://get.acloudguru.com/cloud-dictionary-of-pain"> <strong>获得痛苦的云词典</strong> </a> <br/>说云不一定要努力。我们分析了数以百万计的回复，找出了最容易让人犯错的概念。抓住这个<a href="https://get.acloudguru.com/cloud-dictionary-of-pain" target="_blank" rel="noreferrer noopener">云指南</a>获取一些最痛苦的云术语<a>的简洁定义。</a></p></div></div>    
</body>
</html>