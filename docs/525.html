<html>
<head>
<title>EBS Snapshot Lifecycle | A Cloud Guru</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>EBS快照生命周期|云专家</h1>
<blockquote>原文：<a href="https://acloudguru.com/blog/engineering/ebs-snapshot-lifecycle#0001-01-01">https://acloudguru.com/blog/engineering/ebs-snapshot-lifecycle#0001-01-01</a></blockquote><div><div class="elementor-widget-container"><p/><p>亚马逊弹性块存储(EBS)快照是您备份和灾难恢复计划的重要补充，亚马逊数据生命周期管理器(DLM)可以简化这一过程。</p><hr class="wp-block-separator"/><p class="has-text-align-center has-medium-font-size">加速你的职业生涯！</p><p class="has-text-align-center"><a href="https://acloudguru.com/pricing" target="_blank" rel="noreferrer noopener">从ACG开始</a>通过AWS、Microsoft Azure、Google Cloud等领域的课程和实际动手实验室改变你的职业生涯</p><hr class="wp-block-separator"/><p><br/></p><p>Amazon EBS(弹性块存储)快照是您备份和灾难恢复计划的绝佳补充。它们通常被大大小小的组织用于此目的。任何好的灾难恢复计划的一部分是定期检查和测试它。您的审查应该包括清理旧的快照，因为随着时间的推移，随着环境的变化和增长，您可能会发现您已经积累了大量的快照。虽然快照被认为是增量的，并且每个快照的相关存储成本往往很低，但情况并非总是如此。例如，您可能需要拥有频繁的大容量快照，这些快照具有不同的保留时间。随着时间的推移，这可能会增加大量存储费用。此外，手动管理所有这些快照可能相当麻烦。这就是亚马逊数据生命周期管理器(DLM)能帮上忙的地方。</p><h2 id="h-what-is-dlm">什么是DLM？</h2><p>Amazon Data Lifecycle Manager为您管理EBS快照备份提供了一种简单的自动化方式。使用此服务，您将能够自动创建、保留和删除您的EBS快照。使用它的一些好处包括:</p><ul><li>通过实施定期备份计划来保护宝贵的数据。</li><li>创建可以定期刷新的标准化ami。</li><li>根据审计员或内部合规要求保留备份。</li><li>通过删除过时的备份来降低存储成本。</li><li>创建将数据备份到独立帐户的灾难恢复备份策略</li></ul><p class="wp-container-640f2511996a1 wp-block-buttons"/><h3 id="h-let-s-take-a-look-at-a-simple-use-case"><strong>让我们来看一个简单的用例</strong></h3><p>您有一个法规遵从性指令，要求您创建EBS卷的新快照。快照需要每小时生成一次，并删除超过2天的快照。这可能是一个重复性的任务，但在DLM的帮助下，我们可以快速设置为自动化。</p><p>对于我们的示例，我们将假设该卷已经存在，并且我们正在设置一个新的生命周期策略。从我们的EC2控制面板中，我们希望转到导航窗格中的“Volumes”并选择我们的卷。</p><p>DLM使用标记，因此我们要做的第一件事是为该卷(以及未来的潜在卷)设置一个特殊标记，生命周期策略将使用该标记来管理快照。</p><ol><li>单击卷ID，然后单击“标记”选项卡。在这里，我们要单击“管理标签”，然后添加标签。</li><li>我将使用键:enable-snapshot值:yes，然后保存它。</li><li>现在，我们的卷已被标记，单击导航窗格中的LifeCycle Manager链接。</li><li>在那里，从下拉列表中选择EBS快照，然后单击下一步。</li><li>在这种情况下，我们的目标是一个卷，因此请确保选中该卷，然后我们希望将我们新添加的标记用于目标资源。输入标签，然后单击添加。</li><li>提供此策略的描述。</li><li>我们将IAM角色保留为默认角色，尽管您可以为此创建自定义角色。此外，在本例中，我们不会向快照添加任何标签，但是如果您需要或想要，您可以这样做。</li><li>接下来，验证策略是否设置为启用。然后单击下一步。</li></ol><figure class="wp-block-image size-large"><img loading="lazy" src="../Images/6b0419d84a6c47372a4a44bfc723934c.png" alt="" class="wp-image-120883" srcset="https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_1700/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2022/06/EBS-Snapshot-Lifecycle-1.png 1700w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_300/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2022/06/EBS-Snapshot-Lifecycle-1.png 300w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_1024/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2022/06/EBS-Snapshot-Lifecycle-1.png 1024w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_768/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2022/06/EBS-Snapshot-Lifecycle-1.png 768w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_1536/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2022/06/EBS-Snapshot-Lifecycle-1.png 1536w, https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto,w_380/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2022/06/EBS-Snapshot-Lifecycle-1.png 380w" sizes="(max-width: 1700px) 100vw, 1700px" data-original-src="https://res.cloudinary.com/acloud-guru/image/fetch/c_thumb,f_auto,q_auto/https://acg-wordpress-content-production.s3.us-west-2.amazonaws.com/app/uploads/2022/06/EBS-Snapshot-Lifecycle-1.png"/></figure><p>现在我们需要为策略创建时间表。我们知道它需要每小时运行一次，并且应该保留2天。在计划屏幕上，我们可以填写此内容。因为我们只创建这一个计划，所以我将保留默认名称。需要注意的一点是，开始时间采用UTC，策略将在开始时间的一小时内运行。我们可以跳过其余的高级设置，继续查看策略。验证一切正常后，单击创建策略。</p><p>这将我们带回到生命周期管理器视图，我们可以看到我们的新策略。等待时间表的开始时间过去后，我们可以检查“Snapshots”选项卡，看到我们有了一个新的快照。根据我们设置的保留策略，这将在2天后删除。</p><hr class="wp-block-separator"/><p>就像这样，我们设置了自动化快照创建和删除策略来帮助我们实现合规性。您不必再担心数量不断增长的快照，因为它们现在由数据生命周期管理器管理。所有技术都有失败的可能，幸运的是，您可以使用CloudWatch来监控此类事件，并解决任何可能出现的问题。</p><hr class="wp-block-separator"/><h3 id="h-want-to-learn-more-about-aws">想了解更多关于AWS的知识？</h3><p>想了解更多关于AWS的知识？看看我最新的课程，<a href="https://learn.acloud.guru/course/running-linux-servers-on-aws/overview">在AWS </a>上运行 <a href="https://learn.acloud.guru/course/running-linux-servers-on-aws/overview" target="_blank" rel="noreferrer noopener"> Linux </a> <a href="https://learn.acloud.guru/course/running-linux-servers-on-aws/overview">服务器。由于AWS云的很大一部分都是基于Linux构建的，所以公司和个人在AWS中运行的许多虚拟机也使用Linux也就不足为奇了。查看本课程，我们将深入了解在AWS平台上运行Linux系统的世界。</a></p><p/><p class="has-text-align-center"><em>想跟上AWS的一切？</em> <a href="https://www.youtube.com/c/AcloudGuru"> <em>在YouTube上订阅一位云大师</em> </a> <em>的每周亚马逊新闻和AWS公告。你也可以像ACG上的</em><a href="https://www.facebook.com/acloudguru"><em/></a><em>一样，关注我们上的</em> <a href="https://twitter.com/acloudguru"> <em>推特</em> </a> <em>，或者加入</em> <a href="https://discord.com/invite/pluralsight"> <em>不和谐</em> </a> <em>的对话！</em></p></div></div>    
</body>
</html>